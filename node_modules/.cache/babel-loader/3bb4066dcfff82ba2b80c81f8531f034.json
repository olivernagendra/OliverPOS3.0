{"ast":null,"code":"import _slicedToArray from\"D:/OliverPOS/OliverPOS3.0/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _defineProperty from\"D:/OliverPOS/OliverPOS3.0/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";/**\r\n * Created By   : Shakuntala Jatav\r\n * Created Date : on March\r\n * Description  : calculate which type of tax apply in product and cart and checkout section include exclusive and inclusive.\r\n * \r\n * Updated By   : Shakuntala Jatav\r\n * Updated Date : 06-06-2019,13-06-2019,19-06-2019\r\n * Description : 1. when update tax rate(changeTaxRate). \r\n                 2. when tax satus is none so no one tax aaply. \r\n                 3. update multiple tax.\r\n*/ // var RoundAmount = (val) => {\n//     //return Math.round(val * 100) / 100;\n//     var decimals = 2;\n//     return Number(Math.round(val + 'e' + decimals) + 'e-' + decimals);\n// }\nexport var getInclusiveTax=function getInclusiveTax(price,taxclass){//console.log(\"getInclusiveTax\", price, taxclass)\nvar deafult_tax=localStorage.getItem('APPLY_DEFAULT_TAX')?JSON.parse(localStorage.getItem(\"APPLY_DEFAULT_TAX\")):null;var selected_tax=localStorage.getItem('TAXT_RATE_LIST')?JSON.parse(localStorage.getItem(\"TAXT_RATE_LIST\")):null;var apply_defult_tax=localStorage.getItem('DEFAULT_TAX_STATUS')?localStorage.getItem('DEFAULT_TAX_STATUS').toString():null;var TaxRate=apply_defult_tax==\"true\"?deafult_tax:selected_tax;// var Price = RoundAmount(price);\nvar Price=parseFloat(price);var tax_rate=0;if(TaxRate&&TaxRate.length>0){TaxRate.map(function(addTax){if(addTax.check_is==true){if(taxclass==addTax.TaxClass&&apply_defult_tax==\"true\"){tax_rate+=parseFloat(addTax.TaxRate);}if(apply_defult_tax==\"false\"){tax_rate+=parseFloat(addTax.TaxRate);}}});}//check the product having diffrent tax class which is not match with standered class  \nif(tax_rate==0&&apply_defult_tax==\"true\"){selected_tax&&Array.isArray(selected_tax)==true&&selected_tax.map(function(addTax){if(taxclass==addTax.TaxClass){tax_rate+=parseFloat(addTax.TaxRate);}});}var actual_price=0;var inclusiveTax=0;actual_price=parseFloat(Price)/(tax_rate/100+1);inclusiveTax=Price-actual_price;return inclusiveTax;};export var getExclusiveTax=function getExclusiveTax(price,taxclass){var deafult_tax=localStorage.getItem('APPLY_DEFAULT_TAX')?JSON.parse(localStorage.getItem(\"APPLY_DEFAULT_TAX\")):null;var selected_tax=localStorage.getItem('TAXT_RATE_LIST')?JSON.parse(localStorage.getItem(\"TAXT_RATE_LIST\")):null;var apply_defult_tax=localStorage.getItem('DEFAULT_TAX_STATUS')?localStorage.getItem('DEFAULT_TAX_STATUS'):null;var TaxRate=apply_defult_tax==\"true\"?deafult_tax:selected_tax;var Price=RoundAmount(price);var tax_rate=0;if(TaxRate&&TaxRate.length>0){TaxRate.map(function(addTax){if(addTax.check_is==true){if(taxclass==addTax.TaxClass&&apply_defult_tax==\"true\"){tax_rate+=parseFloat(addTax.TaxRate);}if(apply_defult_tax==\"false\"){tax_rate+=parseFloat(addTax.TaxRate);}}});}//check the product having diffrent tax class which is not match with standered class  \nif(tax_rate==0&&apply_defult_tax==\"true\"){selected_tax&&Array.isArray(selected_tax)==true&&selected_tax.map(function(addTax){if(taxclass==addTax.TaxClass){tax_rate+=parseFloat(addTax.TaxRate);}});}var exclusiveTax=0;exclusiveTax=parseFloat(Price*tax_rate/100);return exclusiveTax;};/**\r\n * Created By   : Shakuntala Jatav\r\n * Created Date : 17-06-2019\r\n * Description  : provide array of tax prodcut wise in inclusive case .\r\n * \r\n * Updated By   :\r\n * Updated Date :\r\n * Description :    \r\n*/export var getInclusiveTaxForTotal=function getInclusiveTaxForTotal(price,taxclass){//console.log(\"getInclusiveTaxForTotal\")\nvar deafult_tax=localStorage.getItem('APPLY_DEFAULT_TAX')?JSON.parse(localStorage.getItem(\"APPLY_DEFAULT_TAX\")):null;var selected_tax=localStorage.getItem('TAXT_RATE_LIST')?JSON.parse(localStorage.getItem(\"TAXT_RATE_LIST\")):null;var apply_defult_tax=localStorage.getItem('DEFAULT_TAX_STATUS')?localStorage.getItem('DEFAULT_TAX_STATUS').toString():null;var TaxRate=apply_defult_tax==\"true\"?deafult_tax:selected_tax;var tax_rate=0;var tax_rate_count=0;;var actual_price=0;var inclusiveTax=[];var TaxId=0;var Price=parseFloat(price);var price_is=0;if(TaxRate&&TaxRate.length>0){TaxRate.map(function(addTax){if(addTax.check_is==true){if(taxclass==addTax.TaxClass&&apply_defult_tax==\"true\"){tax_rate=parseFloat(addTax.TaxRate);tax_rate_count+=1;TaxId=addTax.TaxId;// console.log(\"actual_price\", actual_price, tax_rate)\n// actual_price = Price / ((tax_rate / 100) + 1);\n// price_is = Price - actual_price;\nprice_is=Price*tax_rate/100;inclusiveTax.push({id:TaxId,price:price_is});}if(apply_defult_tax==\"false\"){tax_rate=parseFloat(addTax.TaxRate);tax_rate_count+=1;TaxId=addTax.TaxId;//  actual_price = Price / ((tax_rate / 100) + 1);\n//  price_is = Price - actual_price;\nprice_is=Price*tax_rate/100;inclusiveTax.push({id:TaxId,price:price_is});}}});if(tax_rate_count==0&&tax_rate==0&&apply_defult_tax==\"true\"){selected_tax&&Array.isArray(selected_tax)==true&&selected_tax.map(function(addTax){if(taxclass==addTax.TaxClass){tax_rate=parseFloat(addTax.TaxRate);TaxId=addTax.TaxId;actual_price=Price/(tax_rate/100+1);price_is=Price-actual_price;// price_is= (Price * tax_rate)/100;\ninclusiveTax.push({id:TaxId,price:price_is});// tax_rate = parseFloat(addTax.TaxRate);\n}});}}return inclusiveTax;};/**\r\n * Created By   : Shakuntala Jatav\r\n * Created Date : 17-06-2019\r\n * Description  : provide array of tax prodcut wise in Exclusive case .\r\n * \r\n * Updated By   :\r\n * Updated Date :\r\n * Description :    \r\n*/export var getExclusiveTaxForTotal=function getExclusiveTaxForTotal(price,taxclass){//console.log(\"getExclusiveTaxForTotal\", price)\nvar deafult_tax=localStorage.getItem('APPLY_DEFAULT_TAX')?JSON.parse(localStorage.getItem(\"APPLY_DEFAULT_TAX\")):null;var selected_tax=localStorage.getItem('TAXT_RATE_LIST')?JSON.parse(localStorage.getItem(\"TAXT_RATE_LIST\")):null;var apply_defult_tax=localStorage.getItem('DEFAULT_TAX_STATUS')?localStorage.getItem('DEFAULT_TAX_STATUS'):null;var TaxRate=apply_defult_tax==\"true\"?deafult_tax:selected_tax;var tax_rate=0;var exclusiveTax=[];var Price=parseFloat(price);var TaxId=0;var price_is=0;if(TaxRate&&TaxRate.length>0){TaxRate.map(function(addTax){if(addTax.check_is==true){if(taxclass==addTax.TaxClass&&apply_defult_tax==\"true\"){tax_rate=parseFloat(addTax.TaxRate);TaxId=addTax.TaxId;price_is=parseFloat(Price*tax_rate/100);exclusiveTax.push({id:TaxId,price:price_is});}if(apply_defult_tax==\"false\"){tax_rate=parseFloat(addTax.TaxRate);TaxId=addTax.TaxId;price_is=parseFloat(Price*tax_rate/100);exclusiveTax.push({id:TaxId,price:price_is});}}});}///--- for default tax and have other then standerd class\nif(tax_rate==0&&apply_defult_tax==\"true\"){if(selected_tax&&Array.isArray(selected_tax)==true&&selected_tax.length>0){selected_tax.map(function(addTax){if(taxclass==addTax.TaxClass){tax_rate=parseFloat(addTax.TaxRate);TaxId=addTax.TaxId;price_is=parseFloat(Price*tax_rate/100);exclusiveTax.push({id:TaxId,price:price_is});}});}}//--------------------------------------------------------\nreturn exclusiveTax;};export var setListActivityToCheckout=function setListActivityToCheckout(products){products.map(function(item){var totalTaxArray=item.Taxes&&JSON.parse(item.Taxes)&&JSON.parse(item.Taxes).total;var subtotalTaxArray=item.Taxes&&JSON.parse(item.Taxes)&&JSON.parse(item.Taxes).subtotal;if(item&&!item.subtotal){var pArr=[];pArr.push(item);getCheckoutList(pArr);}item['subtotal']=item.subtotal;item['total']=item.total?item.total:item.totalPrice?item.totalPrice:0;item['total_tax']=item.total_tax?item.total_tax:totalTaxArray?Object.entries(totalTaxArray).map(function(item){return _defineProperty({},item[0],item[1]);}):item.totaltax;item['subtotal_tax']=item.subtotal_tax?item.subtotal_tax:subtotalTaxArray?Object.entries(subtotalTaxArray).map(function(item){return _defineProperty({},item[0],item[1]);}):item.subtotaltax;});};export var getExtensionCheckoutList=function getExtensionCheckoutList(products){var TAX_CASE=getSettingCase();var price=0;var tax=0;products.map(function(item){price=item.discount_amount!==0?item.after_discount*item.quantity-getInclusiveTax(item.after_discount,item.TaxClass):(item.old_price-getInclusiveTax(item.old_price))*item.quantity;var taxes=[];var update_discount_tax=null;var priceIs=price/item.quantity;var discountTaxes=[];var update_Ex_tax=null;if(item.TaxStatus!=='none'){if(item.discount_amount!==0){if(TAX_CASE==1||TAX_CASE==2||TAX_CASE==3||TAX_CASE==4){update_discount_tax=getInclusiveTaxForTotal(priceIs,item.TaxClass);}else{update_discount_tax=getExclusiveTaxForTotal(priceIs,item.TaxClass);}}if(TAX_CASE==1||TAX_CASE==2||TAX_CASE==3||TAX_CASE==4){update_Ex_tax=getInclusiveTaxForTotal(item.old_price,item.TaxClass);}else{update_Ex_tax=getExclusiveTaxForTotal(item.old_price,item.TaxClass);}// console.log(\"update_Ex_tax\", update_Ex_tax, \"update_discount_tax\", update_discount_tax)\nif(update_Ex_tax&&update_Ex_tax.length>0){taxes.push(_defineProperty({},update_Ex_tax[0].id,parseFloat(item.incl_tax)+parseFloat(item.excl_tax)));}if(update_discount_tax&&update_discount_tax.length>0){discountTaxes.push(_defineProperty({},update_discount_tax[0].id,parseFloat(item.incl_tax)+parseFloat(item.excl_tax)));}}//console.log(\"taxes\", taxes, \"discountTaxes\", discountTaxes)\ntax=item.discount_amount!==0?discountTaxes:taxes;item['subtotal']=item.Price;item['total']=item.Price;item['total_tax']=tax;item['subtotal_tax']=taxes;});};/**\r\n * Created By   : Shakuntala Jatav\r\n * Created Date : 17-06-2019\r\n * Description  : update checkout list for call function and update tax list use before call api.\r\n * \r\n * Updated By   :\r\n * Updated Date :\r\n * Description :    \r\n*/export var getCheckoutList=function getCheckoutList(products){var TAX_CASE=getSettingCase();//     console.log(\"TAX_CASE\", TAX_CASE)\n//    console.log(\"products\", products)\nvar all_products=[];var price=0;var tax=0;switch(TAX_CASE){//  case 1  \ncase 1:products.map(function(item){// price = (item.discount_amount !== 0) ? (item.after_discount * item.quantity) - getInclusiveTax(item.after_discount, item.TaxClass) : (item.old_price - getInclusiveTax(item.old_price)) * item.quantity;\nvar includesiveTax=item.incl_tax;//item.isTaxable==false?0: getInclusiveTax(item.old_price, item.TaxClass);\n// price = price-incl_tax;\nvar afterDiscount=item.after_discount!==0?item.after_discount:item.product_after_discount*item.quantity;if(item.discount_type=='Percentage'){//var productDiscount=percentWiseDiscount(item.old_price-includesiveTax, item.new_product_discount_amount);\nprice=afterDiscount;//price =  (item.old_price - includesiveTax) * item.quantity;\n}else{price=item.discount_amount!==0?afterDiscount:item.old_price*item.quantity-includesiveTax;}//price = (item.discount_amount !== 0) ? item.after_discount : (item.old_price - getInclusiveTax(item.old_price)) * item.quantity;\nvar taxes=[];var update_discount_tax=null;//var priceIs = price / item.quantity;\nvar priceIs=item.discount_amount!==0?item.after_discount:item.old_price*item.quantity;var discountTaxes=[];var singleTaxAmount=item.incl_tax>0?item.incl_tax:0;if(item.isTaxable==true&&item.TaxStatus!=='none'){if(item.discount_amount!==0){//update_discount_tax = singleTaxAmount;\nupdate_discount_tax=getInclusiveTaxForTotal(priceIs,item.TaxClass);//test\n//getInclusiveTaxForTotal(priceIs-singleTaxAmount, item.TaxClass);\n}var update_Ex_tax=getInclusiveTaxForTotal(item.old_price*item.quantity-includesiveTax,item.TaxClass);update_Ex_tax.map(function(taxIs){taxes.push(_defineProperty({},taxIs.id,taxIs.price));//* item.quantity\n});update_discount_tax&&update_discount_tax.length>0&&update_discount_tax.map(function(taxDis){discountTaxes.push(_defineProperty({},taxDis.id,taxDis.price));});}tax=item.discount_amount!==0?discountTaxes:taxes;// tax =  taxes;\n//console.log(\"singleTaxAmount\", singleTaxAmount)\nvar _total=0;//_total=price-incl_tax - productDiscount;          \n// if( item.discount_amount !== 0)   \n//     {_total=item.after_discount ;      \n//     //_total=(( item.old_price - includesiveTax) * item.quantity)-item.discount_amount;\n//     }\n//  else\n_total=item.old_price*item.quantity-includesiveTax;//var _total=(calculatedPrice - getInclusiveTax( calculatedPrice, item.TaxClass)) * item.quantity\nitem['subtotal']=_total;item['total']=price;item['total_tax']=tax;item['subtotal_tax']=tax;});all_products=products;break;// case 2\ncase 2:products.map(function(item){var includesiveTax=item.incl_tax;price=item.discount_amount!==0?item.after_discount:(item.old_price-getInclusiveTax(item.old_price,item.TaxClass))*item.quantity;var taxes=[];var update_discount_tax=null;var priceIs=item.discount_amount!==0?item.after_discount:item.old_price*item.quantity-includesiveTax;var discountTaxes=[];var singleTaxAmount=item.excl_tax>0?item.excl_tax:0;if(item.TaxStatus!=='none'){if(item.discount_amount!==0){update_discount_tax=getExclusiveTaxForTotal(priceIs,item.TaxClass);}// var update_Ex_tax = getInclusiveTaxForTotal(item.old_price, item.TaxClass);\n// update_Ex_tax.map(taxIs => {\n//     taxes.push({ [taxIs.id]: taxIs.price * item.quantity })\n// })\n// var update_Ex_tax = getInclusiveTaxForTotal((item.old_price*item.quantity)-includesiveTax, item.TaxClass);\nvar update_Ex_tax=getInclusiveTaxForTotal(price-includesiveTax,item.TaxClass);// TAX CASE-2 18/08/2022\nupdate_Ex_tax.map(function(taxIs){taxes.push(_defineProperty({},taxIs.id,taxIs.price));//* item.quantity\n});update_discount_tax&&update_discount_tax.length>0&&update_discount_tax.map(function(taxDis){discountTaxes.push(_defineProperty({},taxDis.id,taxDis.price));});}tax=item.discount_amount!==0?discountTaxes:taxes;//console.log(\"tax\", tax)\n// var _total=( (item.old_price* item.quantity) - includesiveTax  ) ;\nitem['subtotal']=(item.old_price-getInclusiveTax(item.old_price,item.TaxClass))*item.quantity;// item['subtotal'] = _total;\nitem['total']=price;item['total_tax']=tax;item['subtotal_tax']=tax;});all_products=products;break;// case 3\ncase 3:products.map(function(item){price=item.discount_amount!==0?item.after_discount*item.quantity-getInclusiveTax(item.after_discount,item.TaxClass):(item.old_price-getInclusiveTax(item.old_price,item.TaxClass))*item.quantity;var taxes=[];var update_discount_tax=null;var priceIs=item.discount_amount!==0?item.after_discount:item.old_price*item.quantity;var discountTaxes=[];var singleTaxAmount=item.incl_tax>0?item.incl_tax:0;if(item.TaxStatus!=='none'){if(item.discount_amount!==0){update_discount_tax=getInclusiveTaxForTotal(priceIs,item.TaxClass);}var update_Ex_tax=getInclusiveTaxForTotal(item.old_price,item.TaxClass);update_Ex_tax.map(function(taxIs){taxes.push(_defineProperty({},taxIs.id,taxIs.price*item.quantity));});update_discount_tax&&update_discount_tax.length>0&&update_discount_tax.map(function(taxDis){discountTaxes.push(_defineProperty({},taxDis.id,taxDis.price));});}tax=item.discount_amount!==0?discountTaxes:taxes;item['subtotal']=(item.old_price-getInclusiveTax(item.old_price,item.TaxClass))*item.quantity;item['total']=price;item['total_tax']=tax;item['subtotal_tax']=tax;});all_products=products;break;// case 4\ncase 4:products.map(function(item){price=item.discount_amount!==0?item.after_discount:(item.old_price-getInclusiveTax(item.old_price,item.TaxClass))*item.quantity;var taxes=[];var update_discount_tax=null;var priceIs=item.discount_amount!==0?item.after_discount:item.old_price*item.quantity;var discountTaxes=[];var singleTaxAmount=item.excl_tax>0?item.excl_tax:0;//console.log(\"price\", price)\n// console.log(\"singleTaxAmount\", singleTaxAmount);\nif(item.TaxStatus!=='none'){if(item.discount_amount!==0){update_discount_tax=getExclusiveTaxForTotal(priceIs,item.TaxClass);}var update_Ex_tax=getInclusiveTaxForTotal(item.old_price,item.TaxClass);update_Ex_tax.map(function(taxIs){taxes.push(_defineProperty({},taxIs.id,taxIs.price*item.quantity));});update_discount_tax&&update_discount_tax.length>0&&update_discount_tax.map(function(taxDis){discountTaxes.push(_defineProperty({},taxDis.id,taxDis.price));});}tax=item.discount_amount!==0?discountTaxes:taxes;item['subtotal']=(item.old_price-getInclusiveTax(item.old_price,item.TaxClass))*item.quantity;item['total']=price;item['total_tax']=tax;item['subtotal_tax']=tax;});break;case 6:case 8:products.map(function(item){price=item.discount_amount!==0?item.old_price*item.quantity-item.discount_amount:item.old_price*item.quantity;var taxes=[];var update_discount_tax=null;var priceIs=item.discount_amount!==0?item.after_discount:item.old_price*item.quantity;var discountTaxes=[];if(item.TaxStatus!=='none'){if(item.discount_amount!==0&&item.incl_tax==0){update_discount_tax=getExclusiveTaxForTotal(priceIs,item.TaxClass);}var update_Ex_tax=getExclusiveTaxForTotal(item.old_price,item.TaxClass);update_Ex_tax.map(function(taxIs){taxes.push(_defineProperty({},taxIs.id,taxIs.price*item.quantity));});update_discount_tax&&update_discount_tax.length>0&&update_discount_tax.map(function(taxDis){discountTaxes.push(_defineProperty({},taxDis.id,taxDis.price));});}tax=item.discount_amount!==0?item.incl_tax!==0?item.incl_tax:discountTaxes:taxes;item['subtotal']=item.old_price*item.quantity;item['total']=price;item['total_tax']=tax;item['subtotal_tax']=tax;});break;default:products.map(function(item){price=item.discount_amount!==0?item.old_price*item.quantity-exclusiveDiscount(item.after_discount,item.discount_amount,item.old_price*item.quantity):item.old_price*item.quantity;var taxes=[];var update_discount_tax=null;var priceIs=(item.discount_amount!==0?item.after_discount:item.old_price)*item.quantity;var discountTaxes=[];if(item.TaxStatus!=='none'){if(item.discount_amount!==0&&item.incl_tax!==0){update_discount_tax=getInclusiveTaxForTotal(priceIs,item.TaxClass);}var update_Ex_tax=getExclusiveTaxForTotal(item.old_price,item.TaxClass);update_Ex_tax.map(function(taxIs){taxes.push(_defineProperty({},taxIs.id,taxIs.price*item.quantity));});update_discount_tax&&update_discount_tax.length>0&&update_discount_tax.map(function(taxDis){discountTaxes.push(_defineProperty({},taxDis.id,taxDis.price));});}tax=item.discount_amount!==0?item.incl_tax!==0?discountTaxes:item.excl_tax:taxes;item['subtotal']=item.old_price*item.quantity;item['total']=price;item['total_tax']=tax;item['subtotal_tax']=tax;});all_products=products;break;}return all_products;};export var productPriceWithTax=function productPriceWithTax(price,condition,taxclass){var deafult_tax=localStorage.getItem('APPLY_DEFAULT_TAX')?JSON.parse(localStorage.getItem(\"APPLY_DEFAULT_TAX\")):null;var selected_tax=localStorage.getItem('TAXT_RATE_LIST')?JSON.parse(localStorage.getItem(\"TAXT_RATE_LIST\")):null;var apply_defult_tax=localStorage.getItem('DEFAULT_TAX_STATUS')?localStorage.getItem('DEFAULT_TAX_STATUS'):null;var TaxRate=apply_defult_tax==\"true\"?deafult_tax:selected_tax;var tax_rate=0;var actual_price=0;if(TaxRate&&TaxRate.length>0){TaxRate.map(function(addTax){if(addTax.check_is==true){if(taxclass==addTax.TaxClass&&apply_defult_tax==\"true\"){tax_rate+=parseFloat(addTax.TaxRate);}if(apply_defult_tax==\"false\"){tax_rate+=parseFloat(addTax.TaxRate);}}});}if(condition=='3'||condition=='4')return actual_price=parseFloat(price)/(tax_rate/100+1);else return actual_price=parseFloat(parseFloat(price)*tax_rate/100)+parseFloat(price);};export var typeOfTax=function typeOfTax(){var TAX_CASE=getSettingCase();var TAX_IS=\"Tax\";switch(TAX_CASE){case 1:case 3:case 5:case 7:TAX_IS=\"incl\";break;default:TAX_IS=\"Tax\";break;}return TAX_IS;};// Apply tax when show product list on shop \nexport var getTaxAllProduct=function getTaxAllProduct(products){var all_products=[];var price=0;var TAX_CASE=getSettingCase();//console.log(\"TAX_CASE\", TAX_CASE)\nswitch(TAX_CASE){//  case 1  \ncase 1:case 2:case 7:case 8:if(products&&products!==null&&products!==undefined){products.map(function(item){item['old_price']=item.Price;});}all_products=products;break;case 3:case 4:case 5:case 6:products&&products.map(function(item){item['old_price']=item.Price;if(item.TaxStatus!==\"none\"){price=productPriceWithTax(item.Price,TAX_CASE,item.TaxClass);item['Price']=parseFloat(price);}});all_products=products;break;default:products&&products.map(function(item){item['old_price']=item.Price;});all_products=products;break;}return all_products;};export var cartPriceWithTax=function cartPriceWithTax(price,condition,taxclass){//console.log(\"cartPriceWithTax\", price, condition)\nvar deafult_tax=localStorage.getItem('APPLY_DEFAULT_TAX')?JSON.parse(localStorage.getItem(\"APPLY_DEFAULT_TAX\")):null;var selected_tax=localStorage.getItem('TAXT_RATE_LIST')?JSON.parse(localStorage.getItem(\"TAXT_RATE_LIST\")):null;var apply_defult_tax=localStorage.getItem('DEFAULT_TAX_STATUS')?localStorage.getItem('DEFAULT_TAX_STATUS'):null;var TaxRate=apply_defult_tax==\"true\"?deafult_tax:selected_tax;var tax_rate=0;var actual_price=0;if(TaxRate&&TaxRate.length>0){TaxRate.map(function(addTax){if(addTax.check_is==true){if(taxclass==addTax.TaxClass&&apply_defult_tax==\"true\"){tax_rate+=parseFloat(addTax.TaxRate);}if(apply_defult_tax==\"false\"){tax_rate+=parseFloat(addTax.TaxRate);}}});}///--- for default tax and have other then standerd class\nif(tax_rate==0&&apply_defult_tax==\"true\"){if(selected_tax&&Array.isArray(selected_tax)==true&&selected_tax.length>0){selected_tax.map(function(addTax){if(taxclass==addTax.TaxClass){tax_rate=parseFloat(addTax.TaxRate);}});}}if(condition=='7')return actual_price=parseFloat(parseFloat(price)*tax_rate/100)+parseFloat(price);else if(condition=='2'||condition=='4')return actual_price=parseFloat(price)/(tax_rate/100+1);else return actual_price=parseFloat(price)-parseFloat(parseFloat(price)*tax_rate/100);};// Apply tax when product add on cart\n// updated by: Nagendra\n// udated Date: 19 May 2020\n// Description: Remove the prodcut id to get tax  due to custome fee may be taxable and custome fee donot have product id.........\nexport var getTaxCartProduct=function getTaxCartProduct(products){//console.log(\"getTaxCartProduct\",products)\nvar TAX_CASE=getSettingCase();//console.log(\"TAX_CASE\", TAX_CASE)\nvar all_products=[];var price=0;var incl_tax=0;var excl_tax=0;switch(TAX_CASE){// case 1\ncase 1:products.map(function(item){incl_tax=0;if(item.TaxStatus!==\"none\"){//item.product_id &&\nif(item.isTaxable==true){incl_tax=getInclusiveTax(item.after_discount&&item.after_discount>0?item.after_discount:item.old_price,item.TaxClass);}item['incl_tax']=incl_tax;//* item.quantity\n}});all_products=products;break;// case 2\ncase 2:products.map(function(item){excl_tax=0;price=0;if(item.TaxStatus!==\"none\"){//item.product_id && \nprice=item.old_price;if(item.isTaxable==true){excl_tax=getInclusiveTax(item.old_price,item.TaxClass);price=cartPriceWithTax(item.old_price,2,item.TaxClass);}item['Price']=price*item.quantity;item['excl_tax']=excl_tax*item.quantity;}});all_products=products;break;// case 3\ncase 3:products&&products.map(function(item){incl_tax=0;price=0;if(item.TaxStatus!==\"none\"){//item.product_id &&\nprice=item.old_price;if(item.isTaxable==true){incl_tax=getInclusiveTax(item.old_price,item.TaxClass);item['Price']=item.old_price*item.quantity;}item['incl_tax']=incl_tax*item.quantity;}});all_products=products;break;// case 4\ncase 4:products&&products.map(function(item){excl_tax=0;price=0;if(item.TaxStatus!==\"none\"){//item.product_id && \nprice=item.old_price;if(item.isTaxable==true){excl_tax=getInclusiveTax(item.old_price,item.TaxClass);price=cartPriceWithTax(item.old_price,4,item.TaxClass);}item['Price']=price*item.quantity;item['excl_tax']=excl_tax*item.quantity;}});all_products=products;break;// case 5\ncase 5:products.map(function(item){incl_tax=0;price=0;if(item.TaxStatus!==\"none\"){//item.product_id &&\nif(item.isTaxable==true){incl_tax=getExclusiveTax(item.old_price,item.TaxClass);}item['Price']=item.Price;item['incl_tax']=incl_tax*item.quantity;}});all_products=products;break;// case 6\ncase 6:products&&products.map(function(item){excl_tax=0;price=0;if(item.TaxStatus!==\"none\"){//item.product_id && \nif(item.isTaxable==true){excl_tax=getExclusiveTax(item.old_price,item.TaxClass);}item['Price']=item.old_price*item.quantity;item['excl_tax']=excl_tax*item.quantity;}});all_products=products;break;// case 7\ncase 7:products&&products.map(function(item){incl_tax=0;price=0;if(item.TaxStatus!==\"none\"){//item.product_id &&\nprice=item.old_price;if(item.isTaxable==true){price=cartPriceWithTax(item.old_price,7,item.TaxClass);incl_tax=getExclusiveTax(item.old_price,item.TaxClass);}item['Price']=price*item.quantity;item['incl_tax']=incl_tax*item.quantity;}});all_products=products;break;// case 8\ndefault:products&&products.map(function(item){excl_tax=0;//item.product_id &&\nif(item.TaxStatus!==\"none\"){if(item.isTaxable==true){excl_tax=getExclusiveTax(item.old_price,item.TaxClass);}item['excl_tax']=excl_tax*item.quantity;}});all_products=products;break;}return all_products;};export var inclusiveDiscount=function inclusiveDiscount(after_discount,discount_amount,old_price,TaxClass){var subtotal=old_price-getInclusiveTax(old_price,TaxClass);var price=after_discount+discount_amount;var discount=discount_amount*100.00/price;var get_discount=subtotal*discount/100.00;return get_discount;};export var exclusiveDiscount=function exclusiveDiscount(after_discount,discount_amount,old_price){var subtotal=old_price;var price=after_discount+discount_amount;var discount=discount_amount*100.00/price;var get_discount=subtotal*discount/100.00;return get_discount;};// apply discount when finaly payment save\nexport var getDiscountAmount=function getDiscountAmount(products){var TAX_CASE=getSettingCase();var discountIs=0;var after_discount=0;var discount_amount=0;var old_price=0;var TaxClass=\"\";switch(TAX_CASE){//  case 1  \ncase 1:case 2:case 3:case 4:products.map(function(item){if(item.discount_amount!==0){var afterDiscount=item.after_discount!==0?item.after_discount:item.product_after_discount*item.quantity;after_discount+=afterDiscount;}else{after_discount+=item.Price;}if(item.discount_type=='Percentage'){var inclTax=getInclusiveTax(item.old_price,item.TaxClass);discount_amount+=percentWiseDiscount(item.old_price-inclTax,item.new_product_discount_amount)*item.quantity;discountIs=discount_amount;}else if(item.discount_type=='Number'){discount_amount+=item.discount_amount;discountIs=inclusiveDiscount(after_discount,discount_amount,old_price,TaxClass);}old_price+=item.old_price*item.quantity;TaxClass=item.TaxClass;});break;// case 5\ncase 6:case 8:products.map(function(item){discountIs+=item.discount_amount;});break;default:products.map(function(item){if(item.discount_amount!==0)after_discount+=item.after_discount;else{after_discount+=item.Price;}discount_amount+=item.discount_amount;old_price+=item.old_price*item.quantity;});discountIs=exclusiveDiscount(after_discount,discount_amount,old_price);break;}return discountIs;};// case for all type of shop tax setting\nexport var getSettingCase=function getSettingCase(){var TaxSetting=localStorage.getItem(\"TAX_SETTING\")?JSON.parse(localStorage.getItem(\"TAX_SETTING\")):null;var all_products=[];var prices_include_tax=TaxSetting?TaxSetting.pos_prices_include_tax:'no';var tax_display_shop=TaxSetting?TaxSetting.pos_tax_display_shop:'excl';var tax_display_cart=TaxSetting?TaxSetting.pos_tax_display_cart:'excl';var tax_round_at_subtotal=TaxSetting?TaxSetting.pos_tax_round_at_subtotal:'no';var tax_case=0;switch(true){//  case 1  \ncase prices_include_tax==\"yes\"&&tax_display_shop==\"incl\"&&tax_display_cart==\"incl\":tax_case=1;break;// case 2\ncase prices_include_tax==\"yes\"&&tax_display_shop==\"incl\"&&tax_display_cart==\"excl\":tax_case=2;break;// case 3\ncase prices_include_tax==\"yes\"&&tax_display_shop==\"excl\"&&tax_display_cart==\"incl\":tax_case=3;break;// case 4\ncase prices_include_tax==\"yes\"&&tax_display_shop==\"excl\"&&tax_display_cart==\"excl\":tax_case=4;break;// case 5\ncase prices_include_tax==\"no\"&&tax_display_shop==\"incl\"&&tax_display_cart==\"incl\":tax_case=5;break;// case 6\ncase prices_include_tax==\"no\"&&tax_display_shop==\"incl\"&&tax_display_cart==\"excl\":tax_case=6;break;// case 7\ncase prices_include_tax==\"no\"&&tax_display_shop==\"excl\"&&tax_display_cart==\"incl\":tax_case=7;break;// case 8\ndefault:tax_case=8;break;}return tax_case;};export var changeTaxRate=function changeTaxRate(item,status){var array_of_tax=[];if(item){item&&item.map(function(items){if(items.check_is==true){array_of_tax.push(items);}});if(array_of_tax&&array_of_tax.length>0){localStorage.setItem('DEFAULT_TAX_STATUS',false);}localStorage.setItem(\"TAXT_RATE_LIST\",JSON.stringify(array_of_tax));}var products=localStorage.getItem(\"CARD_PRODUCT_LIST\")?JSON.parse(localStorage.getItem(\"CARD_PRODUCT_LIST\")):[];var updateTax=getTaxCartProduct(products);return updateTax;};export var RoundAmount=function RoundAmount(val){//return Math.round(val * 100) / 100;\nvar decimals=2;return Number(Math.round(val+'e'+decimals)+'e-'+decimals);};/**\r\n * Created BY : Shakuntala Jatav\r\n * Created Date : 28-Feb-2020\r\n * @param {*} productx get product-x data\r\n * @param {*} product_list get product list array\r\n * Description : Apply taxes on chlid product of productx data\r\n */export var getProductxChlidProductTax=function getProductxChlidProductTax(productx,product_list){productx.map(function(prdx){if(prdx.composite_data){var productXArray=setProductxTax(prdx.composite_data,product_list);prdx['composite_data']=productXArray;}if(prdx.stamp){var productXArray=setProductxTax(prdx.stamp,product_list);prdx['stamp']=productXArray;}});return productx;};/**\r\n * Created BY : Shakuntala Jatav\r\n * Created Date : 02-03-2020\r\n * @param {*} productx \r\n * @param {*} product_list \r\n * Description : Prepair taxes on chlid product of productx data\r\n */export var setProductxTax=function setProductxTax(productx,product_list){Object.keys(productx).map(function(i){var findProductValue=product_list.filter(function(_item){return productx[i].variation_id?_item.WPID==productx[i].variation_id&&_item.ParentId==productx[i].product_id&&productx[i].quantity>0:_item.WPID==productx[i].product_id&&productx[i].quantity>0;});if(findProductValue&&findProductValue.length>0){findProductValue[0]['quantity']=productx[i].quantity;findProductValue[0]['product_id']=productx[i].product_id;findProductValue[0]['variation_id']=productx[i].variation_id?productx[i].variation_id:0;findProductValue[0]['discount_amount']=productx[i].discount?productx[i].discount:0;findProductValue[0]['after_discount']=productx[i].discount?parseFloat(findProductValue[0].Price*Number(productx[i].quantity))-parseFloat(productx[i].discount):0;var setProducts=getTaxAllProduct(findProductValue);var products=getTaxCartProduct(setProducts);var taxWithProductx=getCheckoutList(products);if(products&&products.length>0){productx[i]['line_subtotal']=products[0].subtotal;productx[i]['line_total']=products[0].total;productx[i]['line_tax']=products[0].total_tax;productx[i]['line_subtotal_tax']=products[0].subtotal_tax;}}});//console.log(\"productx updated tax\", productx);\nreturn productx;};/**\r\n * Created By : Shakuntala Jatav\r\n * Creatted Date : 13-03-2020\r\n * @param {*} type \r\n * Description : Showing Tax Rate with name\r\n */export var getTotalTaxByName=function getTotalTaxByName(type,productx_line_items){var placedOrderList=type=='completecheckout'?localStorage.getItem('placedOrderList')?JSON.parse(localStorage.getItem('placedOrderList')):null:type;//var selected_taxrate_list = localStproductx_line_itemsorage.getItem('SELECTED_TAX') ? JSON.parse(localStorage.getItem('SELECTED_TAX')) : null;\n//SHOP_TAXRATE_LIST\nvar selected_taxrate_list=localStorage.getItem('SHOP_TAXRATE_LIST')?JSON.parse(localStorage.getItem('SHOP_TAXRATE_LIST')):null;var total_taxrate_name=[];var total_taxrate_ids=[];if(productx_line_items&&productx_line_items.length>0){productx_line_items.map(function(itemx){if(itemx.line_total_taxes&&itemx.line_total_taxes.length>0){itemx.line_total_taxes.map(function(subitemx){total_taxrate_ids.push(subitemx);});}});}if(placedOrderList&&placedOrderList.length>0){placedOrderList.map(function(item){if(item.total_taxes&&item.total_taxes.length>0){item.total_taxes.map(function(subitem){total_taxrate_ids.push(subitem);});}if(type!==\"completecheckout\"){var Taxes=item.Taxes.replace(/^\\/?|\\/?$/,\"\");var object1=JSON.parse(Taxes);if(object1){for(var _i=0,_Object$entries=Object.entries(object1.total);_i<_Object$entries.length;_i++){var _Object$entries$_i=_slicedToArray(_Object$entries[_i],2),key=_Object$entries$_i[0],value=_Object$entries$_i[1];total_taxrate_ids.push(_defineProperty({},key,value));}}}});}if(total_taxrate_ids&&total_taxrate_ids.length>0){for(var i=0;i<total_taxrate_ids.length;i++){for(var key in total_taxrate_ids[i]){var filterSelectedTaxRateList=selected_taxrate_list&&selected_taxrate_list.filter(function(match){return match.TaxId==key;});if(filterSelectedTaxRateList&&filterSelectedTaxRateList.length>0){var tax_id=filterSelectedTaxRateList[0].TaxId;var tax_name=filterSelectedTaxRateList[0].TaxName;var tax_TaxRate=filterSelectedTaxRateList[0].TaxRate;var tax_amount=parseFloat(total_taxrate_ids[i][key]);var filterValue=total_taxrate_name&&total_taxrate_name.find(function(_match){return _match.tax_id==tax_id;});if(filterValue){total_taxrate_name.map(function(item){if(item.tax_id==tax_id){item['tax_amount']+=tax_amount;}});}if(!filterValue){total_taxrate_name.push({'tax_id':tax_id,'tax_name':tax_name,'tax_amount':tax_amount,'TaxRate':tax_TaxRate});}}}}//console.log(\"total_taxrate_name\", total_taxrate_name);\n}return total_taxrate_name;};function percentWiseDiscount(price,discount){var discountAmount=price*discount/100.00;return discountAmount;}/**\r\n * Created By : Shakuntala jatav\r\n * Created Date : 06-04-2020\r\n * @param {*} item \r\n * @param {*} qty \r\n * Description : 1. for caculate tax varition poup modal\r\n                 2. Apply tax when product add on cart\r\n */export var getVariatioModalProduct=function getVariatioModalProduct(item,qty){//console.log(\"getVariatioModalProduct\", item, qty)\nif(item.isTaxable==false){return item;}var TAX_CASE=getSettingCase();//console.log(\"TAX_CASE\", TAX_CASE)\nvar all_products=[];var price=0;var incl_tax=0;var excl_tax=0;var discount_amount=item.product_discount_amount?parseFloat(item.product_discount_amount):0;var after_discount_price=0;switch(TAX_CASE){// case 1\ncase 1:if(item.WPID&&item.TaxStatus!==\"none\"){//after_discount_price = item.old_price - discount_amount;\nincl_tax=getInclusiveTax(item.old_price,item.TaxClass);if(item.discount_type==\"Percentage\"){var productDiscount=percentWiseDiscount(item.old_price-incl_tax,item.new_product_discount_amount)*qty;after_discount_price=(item.old_price-incl_tax)*qty-productDiscount;}else{after_discount_price=(item.old_price-incl_tax)*qty-discount_amount;}if(item.discount_type==\"Percentage\"){incl_tax=getInclusiveTax(item.old_price-discount_amount,item.TaxClass);}else{incl_tax=getInclusiveTax(item.old_price*qty-discount_amount,item.TaxClass);}//incl_tax = getInclusiveTax(after_discount_price, item.TaxClass)\n//item['Price'] = after_discount_price * qty\nitem['incl_tax']=item.discount_type==\"Percentage\"?incl_tax*qty:incl_tax;// ******** comented below line  to solve qty * issue on after discount *****//\n// **tst** item['after_discount'] = item.discount_type == \"Percentage\" ? after_discount_price * qty : after_discount_price;\n//**tst** remove qty multiplication from after discount\nitem['after_discount']=after_discount_price;}all_products=item;break;// case 2\ncase 2:if(item.WPID&&item.TaxStatus!==\"none\"){//after_discount_price = item.old_price - discount_amount;               \nif(item.discount_type==\"Percentage\"){var productDiscount=percentWiseDiscount(item.old_price-incl_tax,item.new_product_discount_amount)*qty;after_discount_price=(item.old_price-incl_tax)*qty-productDiscount;}else{after_discount_price=(item.old_price-incl_tax)*qty-discount_amount;}if(item.discount_type==\"Percentage\"){excl_tax=getInclusiveTax(item.old_price-discount_amount,item.TaxClass);}else{excl_tax=getInclusiveTax(item.old_price*qty-discount_amount,item.TaxClass);}price=cartPriceWithTax(after_discount_price,2,item.TaxClass);//item['Price'] = price * qty\nitem['excl_tax']=item.discount_type==\"Percentage\"?excl_tax*qty:excl_tax;item['after_discount']=after_discount_price;}all_products=item;break;// case 3\ncase 3:if(item.WPID&&item.TaxStatus!==\"none\"){//after_discount_price = item.old_price - discount_amount;\nif(item.discount_type==\"Percentage\"){var productDiscount=percentWiseDiscount(item.old_price-incl_tax,item.new_product_discount_amount)*qty;after_discount_price=(item.old_price-incl_tax)*qty-productDiscount;}else{after_discount_price=item.discount_type==\"Percentage\"?item.old_price-discount_amount:item.old_price*qty-discount_amount;}if(item.discount_type==\"Percentage\"){incl_tax=getInclusiveTax(item.old_price-discount_amount,item.TaxClass);}else{incl_tax=getInclusiveTax(item.old_price*qty-discount_amount,item.TaxClass);}//item['Price'] = after_discount_price * qty\nitem['incl_tax']=item.discount_type==\"Percentage\"?incl_tax*qty:incl_tax;item['after_discount']=after_discount_price;}all_products=item;break;// case 4\ncase 4:if(item.WPID&&item.TaxStatus!==\"none\"){//after_discount_price = item.old_price - discount_amount;\nif(item.discount_type==\"Percentage\"){var productDiscount=percentWiseDiscount(item.old_price-incl_tax,item.new_product_discount_amount)*qty;after_discount_price=(item.old_price-incl_tax)*qty-productDiscount;}else{after_discount_price=item.discount_type==\"Percentage\"?item.old_price-discount_amount:item.old_price*qty-discount_amount;}if(item.discount_type==\"Percentage\"){excl_tax=getInclusiveTax(item.old_price-discount_amount,item.TaxClass);}else{excl_tax=getInclusiveTax(item.old_price*qty-discount_amount,item.TaxClass);}price=cartPriceWithTax(after_discount_price,4,item.TaxClass);//item['Price'] = price * qty\nitem['excl_tax']=item.discount_type==\"Percentage\"?excl_tax*qty:excl_tax;;item['after_discount']=after_discount_price;}all_products=item;break;// case 5\ncase 5:if(item.WPID&&item.TaxStatus!==\"none\"){//after_discount_price = item.old_price - discount_amount;\nif(item.discount_type==\"Percentage\"){var productDiscount=percentWiseDiscount(item.old_price-incl_tax,item.new_product_discount_amount)*qty;after_discount_price=(item.old_price-incl_tax)*qty-productDiscount;}else{after_discount_price=item.discount_type==\"Percentage\"?item.old_price-discount_amount:item.old_price*qty-discount_amount;}if(item.discount_type==\"Percentage\"){incl_tax=getExclusiveTax(item.old_price-discount_amount,item.TaxClass);}else{incl_tax=getExclusiveTax(item.old_price*qty-discount_amount,item.TaxClass);}//item['Price'] = item.Price * qty\nitem['incl_tax']=item.discount_type==\"Percentage\"?incl_tax*qty:incl_tax;item['after_discount']=after_discount_price;}all_products=item;break;// case 6\ncase 6:if(item.WPID&&item.TaxStatus!==\"none\"){//after_discount_price = item.old_price - discount_amount;\nif(item.discount_type==\"Percentage\"){var productDiscount=percentWiseDiscount(item.old_price-incl_tax,item.new_product_discount_amount)*qty;after_discount_price=(item.old_price-incl_tax)*qty-productDiscount;}else{after_discount_price=item.discount_type==\"Percentage\"?item.old_price-discount_amount:item.old_price*qty-discount_amount;}if(item.discount_type==\"Percentage\"){excl_tax=getExclusiveTax(item.old_price-discount_amount,item.TaxClass);}else{excl_tax=getExclusiveTax(after_discount_price,item.TaxClass);}//item['Price'] = after_discount_price * old_price\nitem['excl_tax']=item.discount_type==\"Percentage\"?excl_tax*qty:excl_tax;;item['after_discount']=after_discount_price;}all_products=item;break;// case 7\ncase 7:if(item.WPID&&item.TaxStatus!==\"none\"){//after_discount_price = item.old_price - discount_amount;\nif(item.discount_type==\"Percentage\"){var productDiscount=percentWiseDiscount(item.old_price-incl_tax,item.new_product_discount_amount)*qty;after_discount_price=(item.old_price-incl_tax)*qty-productDiscount;}else{after_discount_price=item.discount_type==\"Percentage\"?item.old_price-discount_amount:item.old_price*qty-discount_amount;}price=cartPriceWithTax(after_discount_price,7,item.TaxClass);if(item.discount_type==\"Percentage\"){incl_tax=getExclusiveTax(item.old_price-discount_amount,item.TaxClass);}else{incl_tax=getExclusiveTax(after_discount_price,item.TaxClass);}//item['Price'] = price * qty\nitem['incl_tax']=item.discount_type==\"Percentage\"?incl_tax*qty:incl_tax;item['after_discount']=after_discount_price;}all_products=item;break;// case 8\ndefault:if(item.WPID&&item.TaxStatus!==\"none\"){if(item.discount_type==\"Percentage\"){var productDiscount=percentWiseDiscount(item.old_price-incl_tax,item.new_product_discount_amount)*qty;after_discount_price=(item.old_price-incl_tax)*qty-productDiscount;}else{after_discount_price=item.discount_type==\"Percentage\"?item.old_price-discount_amount:item.old_price*qty-discount_amount;}if(item.discount_type==\"Percentage\"){excl_tax=getExclusiveTax(item.old_price-discount_amount,item.TaxClass);}else{excl_tax=getExclusiveTax(after_discount_price,item.TaxClass);}//item['Price'] = after_discount_price * qty\nitem['excl_tax']=item.discount_type==\"Percentage\"?excl_tax*qty:excl_tax;item['after_discount']=after_discount_price;}all_products=item;break;}return all_products;};export var TaxSetting={getTaxAllProduct:getTaxAllProduct,productPriceWithTax:productPriceWithTax,getTaxCartProduct:getTaxCartProduct,cartPriceWithTax:cartPriceWithTax,getInclusiveTax:getInclusiveTax,getExclusiveTax:getExclusiveTax,getCheckoutList:getCheckoutList,getDiscountAmount:getDiscountAmount,getSettingCase:getSettingCase,typeOfTax:typeOfTax,changeTaxRate:changeTaxRate,getExtensionCheckoutList:getExtensionCheckoutList,setListActivityToCheckout:setListActivityToCheckout,RoundAmount:RoundAmount,getProductxChlidProductTax:getProductxChlidProductTax,getTotalTaxByName:getTotalTaxByName};export default TaxSetting;","map":{"version":3,"names":["getInclusiveTax","price","taxclass","deafult_tax","localStorage","getItem","JSON","parse","selected_tax","apply_defult_tax","toString","TaxRate","Price","parseFloat","tax_rate","length","map","addTax","check_is","TaxClass","Array","isArray","actual_price","inclusiveTax","getExclusiveTax","RoundAmount","exclusiveTax","getInclusiveTaxForTotal","tax_rate_count","TaxId","price_is","push","id","getExclusiveTaxForTotal","setListActivityToCheckout","products","item","totalTaxArray","Taxes","total","subtotalTaxArray","subtotal","pArr","getCheckoutList","totalPrice","total_tax","Object","entries","totaltax","subtotal_tax","subtotaltax","getExtensionCheckoutList","TAX_CASE","getSettingCase","tax","discount_amount","after_discount","quantity","old_price","taxes","update_discount_tax","priceIs","discountTaxes","update_Ex_tax","TaxStatus","incl_tax","excl_tax","all_products","includesiveTax","afterDiscount","product_after_discount","discount_type","singleTaxAmount","isTaxable","taxIs","taxDis","_total","exclusiveDiscount","productPriceWithTax","condition","typeOfTax","TAX_IS","getTaxAllProduct","undefined","cartPriceWithTax","getTaxCartProduct","inclusiveDiscount","discount","get_discount","getDiscountAmount","discountIs","inclTax","percentWiseDiscount","new_product_discount_amount","TaxSetting","prices_include_tax","pos_prices_include_tax","tax_display_shop","pos_tax_display_shop","tax_display_cart","pos_tax_display_cart","tax_round_at_subtotal","pos_tax_round_at_subtotal","tax_case","changeTaxRate","status","array_of_tax","items","setItem","stringify","updateTax","val","decimals","Number","Math","round","getProductxChlidProductTax","productx","product_list","prdx","composite_data","productXArray","setProductxTax","stamp","keys","i","findProductValue","filter","_item","variation_id","WPID","ParentId","product_id","setProducts","taxWithProductx","getTotalTaxByName","type","productx_line_items","placedOrderList","selected_taxrate_list","total_taxrate_name","total_taxrate_ids","itemx","line_total_taxes","subitemx","total_taxes","subitem","replace","object1","key","value","filterSelectedTaxRateList","match","tax_id","tax_name","TaxName","tax_TaxRate","tax_amount","filterValue","find","_match","discountAmount","getVariatioModalProduct","qty","product_discount_amount","after_discount_price","productDiscount"],"sources":["D:/OliverPOS/OliverPOS3.0/src/components/common/TaxSetting.js"],"sourcesContent":["/**\r\n * Created By   : Shakuntala Jatav\r\n * Created Date : on March\r\n * Description  : calculate which type of tax apply in product and cart and checkout section include exclusive and inclusive.\r\n * \r\n * Updated By   : Shakuntala Jatav\r\n * Updated Date : 06-06-2019,13-06-2019,19-06-2019\r\n * Description : 1. when update tax rate(changeTaxRate). \r\n                 2. when tax satus is none so no one tax aaply. \r\n                 3. update multiple tax.\r\n*/\r\n// var RoundAmount = (val) => {\r\n//     //return Math.round(val * 100) / 100;\r\n//     var decimals = 2;\r\n//     return Number(Math.round(val + 'e' + decimals) + 'e-' + decimals);\r\n// }\r\n\r\nexport const getInclusiveTax = (price, taxclass) => {\r\n    //console.log(\"getInclusiveTax\", price, taxclass)\r\n    var deafult_tax = localStorage.getItem('APPLY_DEFAULT_TAX') ? JSON.parse(localStorage.getItem(\"APPLY_DEFAULT_TAX\")) : null;\r\n    var selected_tax = localStorage.getItem('TAXT_RATE_LIST') ? JSON.parse(localStorage.getItem(\"TAXT_RATE_LIST\")) : null;\r\n    var apply_defult_tax = localStorage.getItem('DEFAULT_TAX_STATUS') ? localStorage.getItem('DEFAULT_TAX_STATUS').toString() : null;\r\n    var TaxRate = apply_defult_tax == \"true\" ? deafult_tax : selected_tax;\r\n    // var Price = RoundAmount(price);\r\n    var Price = parseFloat(price);\r\n    var tax_rate = 0;\r\n    if (TaxRate && TaxRate.length > 0) {\r\n        TaxRate.map(addTax => {\r\n            if (addTax.check_is == true) {\r\n                if (taxclass == addTax.TaxClass && apply_defult_tax == \"true\") {\r\n                    tax_rate += parseFloat(addTax.TaxRate);\r\n                }\r\n                if (apply_defult_tax == \"false\") {\r\n                    tax_rate += parseFloat(addTax.TaxRate);\r\n                }\r\n            }\r\n        })\r\n    }   \r\n    //check the product having diffrent tax class which is not match with standered class  \r\n    if(tax_rate==0 && apply_defult_tax==\"true\"){\r\n        selected_tax  && Array.isArray(selected_tax)==true && selected_tax.map(addTax => {\r\n                if (taxclass == addTax.TaxClass ) {\r\n                    tax_rate += parseFloat(addTax.TaxRate);\r\n                }               \r\n        })\r\n    }\r\n    var actual_price = 0;\r\n    var inclusiveTax = 0;\r\n    actual_price = parseFloat(Price) / ((tax_rate / 100) + 1);\r\n    inclusiveTax = (Price - actual_price)\r\n    return inclusiveTax\r\n}\r\n\r\nexport const getExclusiveTax = (price, taxclass) => {\r\n    var deafult_tax = localStorage.getItem('APPLY_DEFAULT_TAX') ? JSON.parse(localStorage.getItem(\"APPLY_DEFAULT_TAX\")) : null;\r\n    var selected_tax = localStorage.getItem('TAXT_RATE_LIST') ? JSON.parse(localStorage.getItem(\"TAXT_RATE_LIST\")) : null;\r\n    var apply_defult_tax = localStorage.getItem('DEFAULT_TAX_STATUS') ? localStorage.getItem('DEFAULT_TAX_STATUS') : null;\r\n    var TaxRate = apply_defult_tax == \"true\" ? deafult_tax : selected_tax;\r\n    var Price = RoundAmount(price);\r\n    var tax_rate = 0;\r\n    if (TaxRate && TaxRate.length > 0) {\r\n        TaxRate.map(addTax => {\r\n            if (addTax.check_is == true) {\r\n                if (taxclass == addTax.TaxClass && apply_defult_tax == \"true\") {\r\n                    tax_rate += parseFloat(addTax.TaxRate);\r\n                }\r\n                if (apply_defult_tax == \"false\") {\r\n                    tax_rate += parseFloat(addTax.TaxRate);\r\n                }\r\n            }\r\n        })\r\n    }\r\n      //check the product having diffrent tax class which is not match with standered class  \r\n      if(tax_rate==0 && apply_defult_tax==\"true\"){\r\n        selected_tax  && Array.isArray(selected_tax)==true && selected_tax.map(addTax => {\r\n                if (taxclass == addTax.TaxClass ) {\r\n                    tax_rate += parseFloat(addTax.TaxRate);\r\n                }               \r\n        })\r\n    }\r\n    var exclusiveTax = 0;\r\n    exclusiveTax = parseFloat((Price * tax_rate) / 100);\r\n    return exclusiveTax;\r\n}\r\n\r\n/**\r\n * Created By   : Shakuntala Jatav\r\n * Created Date : 17-06-2019\r\n * Description  : provide array of tax prodcut wise in inclusive case .\r\n * \r\n * Updated By   :\r\n * Updated Date :\r\n * Description :    \r\n*/\r\nexport const getInclusiveTaxForTotal = (price, taxclass) => {\r\n    //console.log(\"getInclusiveTaxForTotal\")\r\n    var deafult_tax = localStorage.getItem('APPLY_DEFAULT_TAX') ? JSON.parse(localStorage.getItem(\"APPLY_DEFAULT_TAX\")) : null;\r\n    var selected_tax = localStorage.getItem('TAXT_RATE_LIST') ? JSON.parse(localStorage.getItem(\"TAXT_RATE_LIST\")) : null;\r\n    var apply_defult_tax = localStorage.getItem('DEFAULT_TAX_STATUS') ? localStorage.getItem('DEFAULT_TAX_STATUS').toString() : null;\r\n    var TaxRate = apply_defult_tax == \"true\" ? deafult_tax : selected_tax;\r\n    var tax_rate = 0;\r\n    var tax_rate_count=0;;\r\n    var actual_price = 0;\r\n    var inclusiveTax = [];\r\n    var TaxId = 0;\r\n    var Price = parseFloat(price);\r\n    var price_is = 0;\r\n    if (TaxRate && TaxRate.length > 0) {\r\n        TaxRate.map(addTax => {\r\n            if (addTax.check_is == true) {\r\n                if (taxclass == addTax.TaxClass && apply_defult_tax == \"true\") {\r\n                    tax_rate = parseFloat(addTax.TaxRate);\r\n                    tax_rate_count += 1;\r\n                    TaxId = addTax.TaxId;\r\n                    // console.log(\"actual_price\", actual_price, tax_rate)\r\n                    // actual_price = Price / ((tax_rate / 100) + 1);\r\n                    // price_is = Price - actual_price;\r\n                     price_is= (Price * tax_rate)/100;\r\n                     inclusiveTax.push({ id: TaxId, price: price_is })\r\n                }\r\n\r\n                if (apply_defult_tax == \"false\") {\r\n                    tax_rate = parseFloat(addTax.TaxRate);\r\n                    tax_rate_count += 1;\r\n                    TaxId = addTax.TaxId;\r\n                    //  actual_price = Price / ((tax_rate / 100) + 1);\r\n                    //  price_is = Price - actual_price;\r\n                    price_is= (Price * tax_rate)/100;\r\n                    inclusiveTax.push({ id: TaxId, price: price_is })\r\n                }\r\n            }\r\n        })\r\n\r\n        if(tax_rate_count ==0 && tax_rate==0 && apply_defult_tax==\"true\"){\r\n            selected_tax  && Array.isArray(selected_tax)==true && selected_tax.map(addTax => {\r\n                    if (taxclass == addTax.TaxClass ) {\r\n                        tax_rate = parseFloat(addTax.TaxRate);\r\n                        TaxId = addTax.TaxId;\r\n                        actual_price = Price / ((tax_rate / 100) + 1);\r\n                        price_is = Price - actual_price;\r\n                        // price_is= (Price * tax_rate)/100;\r\n                        inclusiveTax.push({ id: TaxId, price: price_is })\r\n                            // tax_rate = parseFloat(addTax.TaxRate);\r\n                    }               \r\n            })\r\n        }\r\n    }\r\n    return inclusiveTax\r\n}\r\n/**\r\n * Created By   : Shakuntala Jatav\r\n * Created Date : 17-06-2019\r\n * Description  : provide array of tax prodcut wise in Exclusive case .\r\n * \r\n * Updated By   :\r\n * Updated Date :\r\n * Description :    \r\n*/\r\nexport const getExclusiveTaxForTotal = (price, taxclass) => {\r\n    //console.log(\"getExclusiveTaxForTotal\", price)\r\n    var deafult_tax = localStorage.getItem('APPLY_DEFAULT_TAX') ? JSON.parse(localStorage.getItem(\"APPLY_DEFAULT_TAX\")) : null;\r\n    var selected_tax = localStorage.getItem('TAXT_RATE_LIST') ? JSON.parse(localStorage.getItem(\"TAXT_RATE_LIST\")) : null;\r\n    var apply_defult_tax = localStorage.getItem('DEFAULT_TAX_STATUS') ? localStorage.getItem('DEFAULT_TAX_STATUS') : null;\r\n    var TaxRate = apply_defult_tax == \"true\" ? deafult_tax : selected_tax;\r\n    var tax_rate = 0;\r\n    var exclusiveTax = [];\r\n    var Price = parseFloat(price);\r\n    var TaxId = 0;\r\n    var price_is = 0;\r\n    if (TaxRate && TaxRate.length > 0) {\r\n        TaxRate.map(addTax => {\r\n            if (addTax.check_is == true) {\r\n                if (taxclass == addTax.TaxClass && apply_defult_tax == \"true\") {\r\n                    tax_rate = parseFloat(addTax.TaxRate);\r\n                    TaxId = addTax.TaxId;\r\n                    price_is = parseFloat((Price * tax_rate) / 100);\r\n                    exclusiveTax.push({ id: TaxId, price: price_is })\r\n                }\r\n                if (apply_defult_tax == \"false\") {\r\n                    tax_rate = parseFloat(addTax.TaxRate);\r\n                    TaxId = addTax.TaxId;\r\n                    price_is = parseFloat((Price * tax_rate) / 100);\r\n                    exclusiveTax.push({ id: TaxId, price: price_is })\r\n                }\r\n            }\r\n        })\r\n    }\r\n        ///--- for default tax and have other then standerd class\r\n        if(tax_rate==0 && apply_defult_tax == \"true\"){\r\n            if (selected_tax && Array.isArray(selected_tax)==true && selected_tax.length > 0) {\r\n                selected_tax.map(addTax => {                 \r\n                        if (taxclass == addTax.TaxClass) {\r\n                            tax_rate = parseFloat(addTax.TaxRate);\r\n                            TaxId = addTax.TaxId;    \r\n                            price_is = parseFloat((Price * tax_rate) / 100);\r\n                            exclusiveTax.push({ id: TaxId, price: price_is }) \r\n                    }\r\n                })\r\n               \r\n        }\r\n    }\r\n    //--------------------------------------------------------\r\n    return exclusiveTax\r\n}\r\n\r\nexport const setListActivityToCheckout = (products) => {\r\n    products.map(item => {\r\n        var totalTaxArray = item.Taxes && JSON.parse(item.Taxes) && JSON.parse(item.Taxes).total;\r\n        var subtotalTaxArray = item.Taxes && JSON.parse(item.Taxes) && JSON.parse(item.Taxes).subtotal;\r\n        if(  item && (!item.subtotal)){\r\n            var pArr=[];\r\n            pArr.push(item);\r\n            getCheckoutList(pArr);        }\r\n        item['subtotal'] = item.subtotal\r\n        item['total'] = item.total ? item.total: item.totalPrice ?item.totalPrice: 0;\r\n        item['total_tax'] = item.total_tax?item.total_tax: totalTaxArray ? Object.entries(totalTaxArray).map(item => ({ [item[0]]: item[1] })) : item.totaltax\r\n        item['subtotal_tax'] = item.subtotal_tax?item.subtotal_tax:subtotalTaxArray ? Object.entries(subtotalTaxArray).map(item => ({ [item[0]]: item[1] })) : item.subtotaltax\r\n    })\r\n}\r\n\r\nexport const getExtensionCheckoutList = (products) => {\r\n    var TAX_CASE = getSettingCase()\r\n    var price = 0;\r\n    var tax = 0;\r\n    products.map(item => {\r\n        price = (item.discount_amount !== 0) ? (item.after_discount * item.quantity) - getInclusiveTax(item.after_discount, item.TaxClass) : (item.old_price - getInclusiveTax(item.old_price)) * item.quantity;\r\n        var taxes = [];\r\n        var update_discount_tax = null;\r\n        var priceIs = price / item.quantity;\r\n        var discountTaxes = [];\r\n        var update_Ex_tax = null;\r\n        if (item.TaxStatus !== 'none') {\r\n            if (item.discount_amount !== 0) {\r\n                if (TAX_CASE == 1 || TAX_CASE == 2 || TAX_CASE == 3 || TAX_CASE == 4) {\r\n                    update_discount_tax = getInclusiveTaxForTotal(priceIs, item.TaxClass);\r\n                } else {\r\n                    update_discount_tax = getExclusiveTaxForTotal(priceIs, item.TaxClass);\r\n                }\r\n            }\r\n            if (TAX_CASE == 1 || TAX_CASE == 2 || TAX_CASE == 3 || TAX_CASE == 4) {\r\n                update_Ex_tax = getInclusiveTaxForTotal(item.old_price, item.TaxClass)\r\n            } else {\r\n                update_Ex_tax = getExclusiveTaxForTotal(item.old_price, item.TaxClass)\r\n            }\r\n            // console.log(\"update_Ex_tax\", update_Ex_tax, \"update_discount_tax\", update_discount_tax)\r\n            if (update_Ex_tax && update_Ex_tax.length > 0) {\r\n                taxes.push({ [update_Ex_tax[0].id]: parseFloat(item.incl_tax) + parseFloat(item.excl_tax) })\r\n            }\r\n            if (update_discount_tax && update_discount_tax.length > 0) {\r\n                discountTaxes.push({ [update_discount_tax[0].id]: parseFloat(item.incl_tax) + parseFloat(item.excl_tax) })\r\n            }\r\n        }\r\n        //console.log(\"taxes\", taxes, \"discountTaxes\", discountTaxes)\r\n        tax = (item.discount_amount !== 0) ? discountTaxes : taxes\r\n        item['subtotal'] = item.Price\r\n        item['total'] = item.Price\r\n        item['total_tax'] = tax\r\n        item['subtotal_tax'] = taxes\r\n    })\r\n}\r\n/**\r\n * Created By   : Shakuntala Jatav\r\n * Created Date : 17-06-2019\r\n * Description  : update checkout list for call function and update tax list use before call api.\r\n * \r\n * Updated By   :\r\n * Updated Date :\r\n * Description :    \r\n*/\r\nexport const getCheckoutList = (products) => {\r\n    var TAX_CASE = getSettingCase();\r\n//     console.log(\"TAX_CASE\", TAX_CASE)\r\n//    console.log(\"products\", products)\r\n    var all_products = [];\r\n    var price = 0;\r\n    var tax = 0;\r\n    switch (TAX_CASE) {\r\n        //  case 1  \r\n        case 1:\r\n            products.map(item => {\r\n               // price = (item.discount_amount !== 0) ? (item.after_discount * item.quantity) - getInclusiveTax(item.after_discount, item.TaxClass) : (item.old_price - getInclusiveTax(item.old_price)) * item.quantity;\r\n             \r\n               var includesiveTax= item.incl_tax;//item.isTaxable==false?0: getInclusiveTax(item.old_price, item.TaxClass);\r\n               // price = price-incl_tax;\r\n                var afterDiscount=item.after_discount !==0?item.after_discount: item.product_after_discount* item.quantity;\r\n               if (item.discount_type == 'Percentage') {\r\n               //var productDiscount=percentWiseDiscount(item.old_price-includesiveTax, item.new_product_discount_amount);\r\n                price =afterDiscount;\r\n                     //price =  (item.old_price - includesiveTax) * item.quantity;\r\n                }else{\r\n               \r\n                    price = (item.discount_amount !== 0) ? (afterDiscount)  : ((item.old_price*item.quantity) - includesiveTax) ;\r\n               }\r\n               //price = (item.discount_amount !== 0) ? item.after_discount : (item.old_price - getInclusiveTax(item.old_price)) * item.quantity;\r\n                var taxes = [];\r\n                var update_discount_tax = null;\r\n                //var priceIs = price / item.quantity;\r\n                var priceIs =  ((item.discount_amount !== 0) ? item.after_discount : item.old_price*item.quantity);\r\n                var discountTaxes = [];\r\n                var singleTaxAmount = item.incl_tax > 0 ? item.incl_tax : 0;\r\n                if ( item.isTaxable==true && item.TaxStatus !== 'none') {\r\n                    if (item.discount_amount !== 0) {\r\n                        //update_discount_tax = singleTaxAmount;\r\n                        update_discount_tax  = getInclusiveTaxForTotal(priceIs, item.TaxClass); //test\r\n                        //getInclusiveTaxForTotal(priceIs-singleTaxAmount, item.TaxClass);\r\n                    }\r\n                    var update_Ex_tax = getInclusiveTaxForTotal((item.old_price*item.quantity)-includesiveTax, item.TaxClass);\r\n                    update_Ex_tax.map(taxIs => {\r\n                        taxes.push({ [taxIs.id]: taxIs.price }) //* item.quantity\r\n                    })                   \r\n                    update_discount_tax && update_discount_tax.length > 0 && update_discount_tax.map(taxDis => {\r\n                        discountTaxes.push({ [taxDis.id]: taxDis.price })\r\n                    })                   \r\n                }\r\n                tax = (item.discount_amount !== 0) ? discountTaxes : taxes;\r\n               // tax =  taxes;\r\n                //console.log(\"singleTaxAmount\", singleTaxAmount)\r\n                 var _total=0;    \r\n                 //_total=price-incl_tax - productDiscount;          \r\n                // if( item.discount_amount !== 0)   \r\n                //     {_total=item.after_discount ;      \r\n                //     //_total=(( item.old_price - includesiveTax) * item.quantity)-item.discount_amount;\r\n                //     }\r\n                //  else\r\n                    _total=( (item.old_price* item.quantity) - includesiveTax  ) ;\r\n               \r\n               //var _total=(calculatedPrice - getInclusiveTax( calculatedPrice, item.TaxClass)) * item.quantity\r\n                item['subtotal'] =_total;\r\n                item['total'] =price  ; \r\n                item['total_tax'] = tax;\r\n                item['subtotal_tax'] = tax;\r\n            })\r\n            all_products = products;\r\n            break;\r\n        // case 2\r\n        case 2:\r\n            products.map(item => {\r\n                var includesiveTax= item.incl_tax;\r\n                price = (item.discount_amount !== 0) ? item.after_discount : (item.old_price - getInclusiveTax(item.old_price, item.TaxClass)) * item.quantity;\r\n                var taxes = [];\r\n                var update_discount_tax = null;\r\n                var priceIs =  ((item.discount_amount !== 0) ? item.after_discount : (item.old_price*item.quantity)- includesiveTax);              \r\n                var discountTaxes = [];\r\n                var singleTaxAmount = item.excl_tax > 0 ? item.excl_tax : 0;\r\n                if (item.TaxStatus !== 'none') {\r\n                    if (item.discount_amount !== 0) {\r\n                        update_discount_tax = getExclusiveTaxForTotal(priceIs, item.TaxClass);\r\n                    }\r\n                    // var update_Ex_tax = getInclusiveTaxForTotal(item.old_price, item.TaxClass);\r\n                    // update_Ex_tax.map(taxIs => {\r\n                    //     taxes.push({ [taxIs.id]: taxIs.price * item.quantity })\r\n                    // })\r\n\r\n                    // var update_Ex_tax = getInclusiveTaxForTotal((item.old_price*item.quantity)-includesiveTax, item.TaxClass);\r\n                    var update_Ex_tax = getInclusiveTaxForTotal((price)-includesiveTax, item.TaxClass); // TAX CASE-2 18/08/2022\r\n                    update_Ex_tax.map(taxIs => {\r\n                        taxes.push({ [taxIs.id]: taxIs.price }) //* item.quantity\r\n                    })   \r\n\r\n                    update_discount_tax && update_discount_tax.length > 0 && update_discount_tax.map(taxDis => {\r\n                        discountTaxes.push({ [taxDis.id]: taxDis.price})\r\n                    })\r\n                }\r\n                tax = (item.discount_amount !== 0) ? discountTaxes : taxes;\r\n                //console.log(\"tax\", tax)\r\n\r\n               // var _total=( (item.old_price* item.quantity) - includesiveTax  ) ;\r\n\r\n                item['subtotal'] = (item.old_price - getInclusiveTax(item.old_price, item.TaxClass)) * item.quantity\r\n                // item['subtotal'] = _total;\r\n                item['total'] = price;\r\n                item['total_tax'] = tax;\r\n                item['subtotal_tax'] = tax;\r\n\r\n            })\r\n            all_products = products;\r\n\r\n            break;\r\n        // case 3\r\n        case 3:\r\n            products.map(item => {\r\n                price = (item.discount_amount !== 0) ? (item.after_discount * item.quantity) - getInclusiveTax(item.after_discount, item.TaxClass) : (item.old_price - getInclusiveTax(item.old_price, item.TaxClass)) * item.quantity;\r\n                var taxes = [];\r\n                var update_discount_tax = null;\r\n                var priceIs =  ((item.discount_amount !== 0) ? item.after_discount : item.old_price*item.quantity);\r\n                var discountTaxes = [];\r\n                var singleTaxAmount = item.incl_tax > 0 ? item.incl_tax : 0;\r\n                if (item.TaxStatus !== 'none') {\r\n                    if (item.discount_amount !== 0) {\r\n                        update_discount_tax = getInclusiveTaxForTotal(priceIs, item.TaxClass);\r\n                    }\r\n                    var update_Ex_tax = getInclusiveTaxForTotal(item.old_price, item.TaxClass);\r\n                    update_Ex_tax.map(taxIs => {\r\n                        taxes.push({ [taxIs.id]: taxIs.price * item.quantity })\r\n                    })\r\n                    update_discount_tax && update_discount_tax.length > 0 && update_discount_tax.map(taxDis => {\r\n                        discountTaxes.push({ [taxDis.id]: taxDis.price})\r\n                    })\r\n                }\r\n                tax = (item.discount_amount !== 0) ? discountTaxes : taxes\r\n                item['subtotal'] = (item.old_price - getInclusiveTax(item.old_price, item.TaxClass)) * item.quantity\r\n                item['total'] = price;\r\n                item['total_tax'] = tax;\r\n                item['subtotal_tax'] = tax;\r\n            })\r\n            all_products = products;\r\n            break;\r\n        // case 4\r\n        case 4:\r\n            products.map(item => {\r\n                price = (item.discount_amount !== 0) ? item.after_discount : (item.old_price - getInclusiveTax(item.old_price, item.TaxClass)) * item.quantity;\r\n                var taxes = [];\r\n                var update_discount_tax = null;\r\n                var priceIs =  ((item.discount_amount !== 0) ? item.after_discount : item.old_price*item.quantity);\r\n                var discountTaxes = [];\r\n                var singleTaxAmount = item.excl_tax > 0 ? item.excl_tax : 0;\r\n                //console.log(\"price\", price)\r\n                // console.log(\"singleTaxAmount\", singleTaxAmount);\r\n                if (item.TaxStatus !== 'none') {\r\n                    if (item.discount_amount !== 0) {\r\n                        update_discount_tax = getExclusiveTaxForTotal(priceIs, item.TaxClass);\r\n                    }\r\n                    var update_Ex_tax = getInclusiveTaxForTotal(item.old_price, item.TaxClass);\r\n                    update_Ex_tax.map(taxIs => {\r\n                        taxes.push({ [taxIs.id]: taxIs.price * item.quantity })\r\n                    })\r\n                    update_discount_tax && update_discount_tax.length > 0 && update_discount_tax.map(taxDis => {\r\n                        discountTaxes.push({ [taxDis.id]: taxDis.price })\r\n                    })\r\n                }\r\n                tax = (item.discount_amount !== 0) ? discountTaxes : taxes;\r\n                item['subtotal'] = (item.old_price - getInclusiveTax(item.old_price, item.TaxClass)) * item.quantity\r\n                item['total'] = price\r\n                item['total_tax'] = tax\r\n                item['subtotal_tax'] = tax;\r\n            })\r\n            break;\r\n        case 6: case 8:\r\n            products.map(item => {\r\n                price = (item.discount_amount !== 0) ? (item.old_price * item.quantity) - item.discount_amount : item.old_price * item.quantity;\r\n                var taxes = [];\r\n                var update_discount_tax = null;\r\n                var priceIs =  ((item.discount_amount !== 0) ? item.after_discount : item.old_price*item.quantity);\r\n                var discountTaxes = [];\r\n                if (item.TaxStatus !== 'none') {\r\n                    if (item.discount_amount !== 0 && item.incl_tax == 0) {\r\n                        update_discount_tax = getExclusiveTaxForTotal(priceIs, item.TaxClass);\r\n                    }\r\n                    var update_Ex_tax = getExclusiveTaxForTotal(item.old_price, item.TaxClass);\r\n                    update_Ex_tax.map(taxIs => {\r\n                        taxes.push({ [taxIs.id]: taxIs.price * item.quantity })\r\n                    })\r\n                    update_discount_tax && update_discount_tax.length > 0 && update_discount_tax.map(taxDis => {\r\n                        discountTaxes.push({ [taxDis.id]: taxDis.price })\r\n                    })\r\n                }\r\n                tax = (item.discount_amount !== 0) ? (item.incl_tax !== 0) ? item.incl_tax : discountTaxes : taxes;\r\n                item['subtotal'] = item.old_price * item.quantity\r\n                item['total'] = price\r\n                item['total_tax'] = tax\r\n                item['subtotal_tax'] = tax;\r\n            })\r\n            break;\r\n        default:\r\n            products.map(item => {\r\n                price = (item.discount_amount !== 0) ? (item.old_price * item.quantity) - exclusiveDiscount(item.after_discount, item.discount_amount, (item.old_price * item.quantity)) : item.old_price * item.quantity;\r\n                var taxes = [];\r\n                var update_discount_tax = null;\r\n                var priceIs =  ((item.discount_amount !== 0) ? item.after_discount : item.old_price)*item.quantity;\r\n                var discountTaxes = [];\r\n                if (item.TaxStatus !== 'none') {\r\n                    if (item.discount_amount !== 0 && item.incl_tax !== 0) {\r\n                        update_discount_tax = getInclusiveTaxForTotal(priceIs, item.TaxClass);\r\n                    }\r\n                    var update_Ex_tax = getExclusiveTaxForTotal(item.old_price, item.TaxClass);\r\n                    update_Ex_tax.map(taxIs => {\r\n                        taxes.push({ [taxIs.id]: taxIs.price * item.quantity })\r\n                    })\r\n                    update_discount_tax && update_discount_tax.length > 0 && update_discount_tax.map(taxDis => {\r\n                        discountTaxes.push({ [taxDis.id]: taxDis.price })\r\n                    })\r\n                }\r\n                tax = (item.discount_amount !== 0) ? (item.incl_tax !== 0) ? discountTaxes : item.excl_tax : taxes;\r\n                item['subtotal'] = item.old_price * item.quantity\r\n                item['total'] = price\r\n                item['total_tax'] = tax\r\n                item['subtotal_tax'] = tax;\r\n            })\r\n            all_products = products;\r\n            break;\r\n    }    \r\n    return all_products\r\n}\r\n\r\nexport const productPriceWithTax = (price, condition, taxclass) => {\r\n    var deafult_tax = localStorage.getItem('APPLY_DEFAULT_TAX') ? JSON.parse(localStorage.getItem(\"APPLY_DEFAULT_TAX\")) : null;\r\n    var selected_tax = localStorage.getItem('TAXT_RATE_LIST') ? JSON.parse(localStorage.getItem(\"TAXT_RATE_LIST\")) : null;\r\n    var apply_defult_tax = localStorage.getItem('DEFAULT_TAX_STATUS') ? localStorage.getItem('DEFAULT_TAX_STATUS') : null;\r\n    var TaxRate = apply_defult_tax == \"true\" ? deafult_tax : selected_tax;\r\n    var tax_rate = 0;\r\n    var actual_price = 0;\r\n    if (TaxRate && TaxRate.length > 0) {\r\n        TaxRate.map(addTax => {\r\n            if (addTax.check_is == true) {\r\n                if (taxclass == addTax.TaxClass && apply_defult_tax == \"true\") {\r\n                    tax_rate += parseFloat(addTax.TaxRate)\r\n                }\r\n                if (apply_defult_tax == \"false\") {\r\n                    tax_rate += parseFloat(addTax.TaxRate);\r\n                }\r\n            }\r\n        })\r\n    }\r\n    if (condition == '3' || condition == '4')\r\n        return actual_price = parseFloat(price) / ((tax_rate / 100) + 1);\r\n    else\r\n        return actual_price = parseFloat((parseFloat(price) * tax_rate) / 100) + parseFloat(price);\r\n}\r\n\r\nexport const typeOfTax = () => {\r\n    var TAX_CASE = getSettingCase();\r\n    var TAX_IS = \"Tax\";\r\n    switch (TAX_CASE) {\r\n        case 1: case 3: case 5: case 7:\r\n            TAX_IS = \"incl\";\r\n            break;\r\n        default:\r\n            TAX_IS = \"Tax\";\r\n            break;\r\n    }\r\n    return TAX_IS\r\n}\r\n// Apply tax when show product list on shop \r\nexport const getTaxAllProduct = (products) => {\r\n    var all_products = [];\r\n    var price = 0;\r\n    var TAX_CASE = getSettingCase();\r\n    //console.log(\"TAX_CASE\", TAX_CASE)\r\n    switch (TAX_CASE) {\r\n        //  case 1  \r\n        case 1: case 2: case 7: case 8:\r\n            if(products && products !== null && products !== undefined){\r\n                products.map(item => {\r\n                    item['old_price'] = item.Price\r\n                })\r\n            }\r\n            all_products = products;\r\n            break;\r\n        case 3: case 4: case 5: case 6:\r\n            products &&  products.map(item => {\r\n                item['old_price'] = item.Price;\r\n                if (item.TaxStatus !== \"none\") {\r\n                    price = productPriceWithTax(item.Price, TAX_CASE, item.TaxClass)\r\n                    item['Price'] = parseFloat(price)\r\n                }\r\n            })\r\n            all_products = products;\r\n            break;\r\n        default:\r\n            products && products.map(item => {\r\n                item['old_price'] = item.Price\r\n            })\r\n            all_products = products;\r\n            break;\r\n    }\r\n\r\n    return all_products\r\n}\r\n\r\nexport const cartPriceWithTax = (price, condition, taxclass) => {\r\n    //console.log(\"cartPriceWithTax\", price, condition)\r\n    var deafult_tax = localStorage.getItem('APPLY_DEFAULT_TAX') ? JSON.parse(localStorage.getItem(\"APPLY_DEFAULT_TAX\")) : null;\r\n    var selected_tax = localStorage.getItem('TAXT_RATE_LIST') ? JSON.parse(localStorage.getItem(\"TAXT_RATE_LIST\")) : null;\r\n    var apply_defult_tax = localStorage.getItem('DEFAULT_TAX_STATUS') ? localStorage.getItem('DEFAULT_TAX_STATUS') : null;\r\n    var TaxRate = apply_defult_tax == \"true\" ? deafult_tax : selected_tax;\r\n    var tax_rate = 0;\r\n    var actual_price = 0;\r\n    if (TaxRate && TaxRate.length > 0) {\r\n        TaxRate.map(addTax => {\r\n            if (addTax.check_is == true) {\r\n                if (taxclass == addTax.TaxClass && apply_defult_tax == \"true\") {\r\n                    tax_rate += parseFloat(addTax.TaxRate);\r\n                }\r\n                if (apply_defult_tax == \"false\") {\r\n                    tax_rate += parseFloat(addTax.TaxRate);\r\n                }\r\n            }\r\n        })\r\n    }\r\n     ///--- for default tax and have other then standerd class\r\n     if(tax_rate==0 && apply_defult_tax == \"true\"){\r\n        if (selected_tax && Array.isArray(selected_tax)==true && selected_tax.length > 0) {\r\n            selected_tax.map(addTax => {                 \r\n                    if (taxclass == addTax.TaxClass) {\r\n                        tax_rate = parseFloat(addTax.TaxRate);\r\n                }\r\n            })\r\n        }  \r\n    }\r\n\r\n    if (condition == '7')\r\n        return actual_price = parseFloat((parseFloat(price) * tax_rate) / 100) + parseFloat(price);\r\n    else if (condition == '2' || condition == '4')\r\n        return actual_price = parseFloat(price) / ((tax_rate / 100) + 1);\r\n    else\r\n        return actual_price = parseFloat(price) - parseFloat((parseFloat(price) * tax_rate) / 100);\r\n}\r\n// Apply tax when product add on cart\r\n// updated by: Nagendra\r\n// udated Date: 19 May 2020\r\n// Description: Remove the prodcut id to get tax  due to custome fee may be taxable and custome fee donot have product id.........\r\nexport const getTaxCartProduct = (products) => {\r\n    //console.log(\"getTaxCartProduct\",products)\r\n    var TAX_CASE = getSettingCase();\r\n    //console.log(\"TAX_CASE\", TAX_CASE)\r\n    var all_products = [];\r\n    var price = 0;\r\n    var incl_tax = 0;\r\n    var excl_tax = 0;\r\n    switch (TAX_CASE) {\r\n        // case 1\r\n        case 1:\r\n            products.map(item => {\r\n                incl_tax = 0;\r\n                if ( item.TaxStatus !== \"none\" ) {//item.product_id &&\r\n                    if( item.isTaxable ==true){\r\n                         incl_tax = getInclusiveTax(item.after_discount && item.after_discount>0?item.after_discount : item.old_price, item.TaxClass)\r\n                    }                   \r\n                    item['incl_tax'] = incl_tax //* item.quantity\r\n                }\r\n            })\r\n            all_products = products;\r\n            break;\r\n        // case 2\r\n        case 2:\r\n            products.map(item => {\r\n                excl_tax = 0;\r\n                price = 0;\r\n                if (item.TaxStatus !== \"none\") {//item.product_id && \r\n                    price=item.old_price;\r\n                    if( item.isTaxable ==true){\r\n                    excl_tax = getInclusiveTax(item.old_price, item.TaxClass)\r\n                    price = cartPriceWithTax(item.old_price, 2, item.TaxClass)\r\n                    }\r\n                    item['Price'] = price * item.quantity\r\n                    item['excl_tax'] = excl_tax * item.quantity\r\n                }\r\n            })\r\n            all_products = products;\r\n            break;\r\n        // case 3\r\n        case 3:\r\n            products && products.map(item => {\r\n                incl_tax = 0;\r\n                price = 0;\r\n                if (item.TaxStatus !== \"none\") { //item.product_id &&\r\n                    price=item.old_price;\r\n                    if( item.isTaxable ==true){\r\n                    incl_tax = getInclusiveTax(item.old_price, item.TaxClass)\r\n                    item['Price'] = item.old_price * item.quantity\r\n                    }\r\n                    item['incl_tax'] = incl_tax * item.quantity\r\n                }\r\n            })\r\n            all_products = products;\r\n            break;\r\n        // case 4\r\n        case 4:\r\n            products && products.map(item => {\r\n                excl_tax = 0;\r\n                price = 0;\r\n                if (item.TaxStatus !== \"none\") { //item.product_id && \r\n                    price=item.old_price;\r\n                    if( item.isTaxable ==true){\r\n                    excl_tax = getInclusiveTax(item.old_price, item.TaxClass)\r\n                    price = cartPriceWithTax(item.old_price, 4, item.TaxClass);\r\n                    }\r\n                    item['Price'] = price * item.quantity\r\n                    item['excl_tax'] = excl_tax * item.quantity\r\n                }\r\n            })\r\n            all_products = products;\r\n            break;\r\n        // case 5\r\n        case 5:\r\n            products.map(item => {\r\n                incl_tax = 0;\r\n                price = 0;\r\n                if ( item.TaxStatus !== \"none\") { //item.product_id &&\r\n                    if( item.isTaxable ==true){\r\n                    incl_tax = getExclusiveTax(item.old_price, item.TaxClass)\r\n                    }\r\n                    item['Price'] = item.Price\r\n                    item['incl_tax'] = incl_tax * item.quantity\r\n                }\r\n            })\r\n            all_products = products;\r\n            break;\r\n        // case 6\r\n        case 6:\r\n            products && products.map(item => {\r\n                excl_tax = 0;\r\n                price = 0;\r\n                if (item.TaxStatus !== \"none\") { //item.product_id && \r\n                    if( item.isTaxable ==true){\r\n                    excl_tax = getExclusiveTax(item.old_price, item.TaxClass)\r\n                    }\r\n                    item['Price'] = item.old_price * item.quantity\r\n                    item['excl_tax'] = excl_tax * item.quantity\r\n                }\r\n            })\r\n            all_products = products;\r\n            break;\r\n        // case 7\r\n        case 7:\r\n            products && products.map(item => {\r\n                incl_tax = 0;\r\n                price = 0;\r\n                if ( item.TaxStatus !== \"none\") {//item.product_id &&\r\n                    price = item.old_price;\r\n                    if( item.isTaxable ==true){\r\n                    price = cartPriceWithTax(item.old_price, 7, item.TaxClass)\r\n                    incl_tax = getExclusiveTax(item.old_price, item.TaxClass)\r\n                    }\r\n                    item['Price'] = price * item.quantity\r\n                    item['incl_tax'] = incl_tax * item.quantity\r\n                }\r\n            })\r\n            all_products = products;\r\n            break;\r\n        // case 8\r\n        default:\r\n            products && products.map(item => {  \r\n                excl_tax = 0;              \r\n                //item.product_id &&\r\n                if ( item.TaxStatus !== \"none\") {\r\n                    if( item.isTaxable ==true){\r\n                    excl_tax = getExclusiveTax(item.old_price, item.TaxClass)\r\n                    }\r\n                    item['excl_tax'] = excl_tax * item.quantity;\r\n                }\r\n            })\r\n            all_products = products;\r\n            break;\r\n    }\r\n    return all_products\r\n}\r\n\r\nexport const inclusiveDiscount = (after_discount, discount_amount, old_price,TaxClass) => {\r\n    var subtotal = old_price - getInclusiveTax(old_price,TaxClass);\r\n    var price = after_discount + discount_amount;\r\n    var discount = (discount_amount * 100.00) / price;\r\n    var get_discount = (subtotal * discount) / 100.00;\r\n    return get_discount;\r\n}\r\n\r\nexport const exclusiveDiscount = (after_discount, discount_amount, old_price) => {\r\n    var subtotal = old_price\r\n    var price = after_discount + discount_amount;\r\n    var discount = (discount_amount * 100.00) / price;\r\n    var get_discount = (subtotal * discount) / 100.00;\r\n    return get_discount;\r\n}\r\n// apply discount when finaly payment save\r\nexport const getDiscountAmount = (products) => {\r\n    var TAX_CASE = getSettingCase()\r\n    var discountIs = 0;\r\n    var after_discount = 0;\r\n    var discount_amount = 0;\r\n    var old_price = 0;\r\n    var TaxClass=\"\";\r\n    switch (TAX_CASE) {\r\n        //  case 1  \r\n        case 1: case 2: case 3: case 4:\r\n            products.map(item => {\r\n                if (item.discount_amount !== 0){\r\n                   var afterDiscount=item.after_discount !==0?item.after_discount: item.product_after_discount* item.quantity;\r\n                    after_discount += afterDiscount;\r\n                }\r\n                else {\r\n                    after_discount += item.Price;\r\n                }\r\n                if(item.discount_type=='Percentage'){\r\n                        var inclTax=getInclusiveTax(item.old_price,item.TaxClass);\r\n                        discount_amount +=percentWiseDiscount(item.old_price-inclTax, item.new_product_discount_amount) * item.quantity;\r\n                        discountIs =discount_amount;\r\n                    }else if(item.discount_type=='Number'){\r\n                        discount_amount += item.discount_amount;\r\n                        discountIs = inclusiveDiscount(after_discount, discount_amount, old_price, TaxClass);\r\n                }\r\n                old_price += item.old_price * item.quantity;\r\n                TaxClass=item.TaxClass;\r\n            })\r\n           \r\n            break;\r\n        // case 5\r\n        case 6: case 8:\r\n            products.map(item => {\r\n                discountIs += item.discount_amount;\r\n            })\r\n            break;\r\n\r\n        default:\r\n            products.map(item => {\r\n                if (item.discount_amount !== 0)\r\n                    after_discount += item.after_discount;\r\n                else {\r\n                    after_discount += item.Price;\r\n                }\r\n                discount_amount += item.discount_amount;\r\n                old_price += item.old_price * item.quantity;\r\n            })\r\n            discountIs = exclusiveDiscount(after_discount, discount_amount, old_price)\r\n            break;\r\n    }\r\n\r\n    return discountIs\r\n}\r\n// case for all type of shop tax setting\r\nexport const getSettingCase = () => {\r\n    var TaxSetting = localStorage.getItem(\"TAX_SETTING\") ? JSON.parse(localStorage.getItem(\"TAX_SETTING\")) : null;\r\n    var all_products = [];\r\n    var prices_include_tax = TaxSetting ? TaxSetting.pos_prices_include_tax : 'no';\r\n    var tax_display_shop = TaxSetting ? TaxSetting.pos_tax_display_shop : 'excl';\r\n    var tax_display_cart = TaxSetting ? TaxSetting.pos_tax_display_cart : 'excl';\r\n    var tax_round_at_subtotal = TaxSetting ? TaxSetting.pos_tax_round_at_subtotal : 'no';\r\n    var tax_case = 0;\r\n\r\n    switch (true) {\r\n        //  case 1  \r\n        case (prices_include_tax == \"yes\" && tax_display_shop == \"incl\" && tax_display_cart == \"incl\"):\r\n            tax_case = 1;\r\n            break;\r\n        // case 2\r\n        case (prices_include_tax == \"yes\" && tax_display_shop == \"incl\" && tax_display_cart == \"excl\"):\r\n            tax_case = 2;\r\n            break;\r\n        // case 3\r\n        case (prices_include_tax == \"yes\" && tax_display_shop == \"excl\" && tax_display_cart == \"incl\"):\r\n            tax_case = 3;\r\n            break;\r\n        // case 4\r\n        case (prices_include_tax == \"yes\" && tax_display_shop == \"excl\" && tax_display_cart == \"excl\"):\r\n            tax_case = 4;\r\n            break;\r\n        // case 5\r\n        case (prices_include_tax == \"no\" && tax_display_shop == \"incl\" && tax_display_cart == \"incl\"):\r\n            tax_case = 5;\r\n            break;\r\n        // case 6\r\n        case (prices_include_tax == \"no\" && tax_display_shop == \"incl\" && tax_display_cart == \"excl\"):\r\n            tax_case = 6;\r\n            break;\r\n        // case 7\r\n        case (prices_include_tax == \"no\" && tax_display_shop == \"excl\" && tax_display_cart == \"incl\"):\r\n            tax_case = 7;\r\n            break;\r\n        // case 8\r\n        default:\r\n            tax_case = 8;\r\n            break;\r\n    }\r\n    return tax_case\r\n}\r\n\r\nexport const changeTaxRate = (item, status) => {\r\n    var array_of_tax = [];\r\n    if (item) {\r\n\r\n        item && item.map(items => {\r\n            if (items.check_is == true) {\r\n                array_of_tax.push(items);\r\n            }\r\n\r\n        })\r\n        if (array_of_tax && array_of_tax.length > 0) {\r\n            localStorage.setItem('DEFAULT_TAX_STATUS', false)\r\n        }\r\n        localStorage.setItem(\"TAXT_RATE_LIST\", JSON.stringify(array_of_tax));\r\n    }\r\n    var products = localStorage.getItem(\"CARD_PRODUCT_LIST\") ? JSON.parse(localStorage.getItem(\"CARD_PRODUCT_LIST\")) : [];\r\n    var updateTax = getTaxCartProduct(products);\r\n    return updateTax;\r\n}\r\n\r\nexport const RoundAmount = (val) => {\r\n    //return Math.round(val * 100) / 100;\r\n    var decimals = 2;\r\n    return Number(Math.round(val + 'e' + decimals) + 'e-' + decimals);\r\n}\r\n\r\n/**\r\n * Created BY : Shakuntala Jatav\r\n * Created Date : 28-Feb-2020\r\n * @param {*} productx get product-x data\r\n * @param {*} product_list get product list array\r\n * Description : Apply taxes on chlid product of productx data\r\n */\r\nexport const getProductxChlidProductTax = (productx, product_list) => {\r\n    productx.map(prdx => {\r\n        if (prdx.composite_data) {\r\n            var productXArray = setProductxTax(prdx.composite_data, product_list);\r\n            prdx['composite_data'] = productXArray;\r\n        }\r\n        if (prdx.stamp) {\r\n            var productXArray = setProductxTax(prdx.stamp, product_list);\r\n            prdx['stamp'] = productXArray;\r\n        }\r\n    })\r\n    return productx;\r\n}\r\n\r\n/**\r\n * Created BY : Shakuntala Jatav\r\n * Created Date : 02-03-2020\r\n * @param {*} productx \r\n * @param {*} product_list \r\n * Description : Prepair taxes on chlid product of productx data\r\n */\r\nexport const setProductxTax = (productx, product_list) => {\r\n    Object.keys(productx).map(i => {\r\n        var findProductValue = product_list.filter(_item => (productx[i].variation_id ? (_item.WPID == productx[i].variation_id && _item.ParentId == productx[i].product_id && productx[i].quantity > 0) : (_item.WPID == productx[i].product_id) && productx[i].quantity > 0));\r\n        if (findProductValue && findProductValue.length > 0) {\r\n            findProductValue[0]['quantity'] = productx[i].quantity;\r\n            findProductValue[0]['product_id'] = productx[i].product_id;\r\n            findProductValue[0]['variation_id'] = productx[i].variation_id ? productx[i].variation_id : 0;\r\n            findProductValue[0]['discount_amount'] = productx[i].discount ? productx[i].discount : 0;\r\n            findProductValue[0]['after_discount'] = productx[i].discount ? parseFloat(findProductValue[0].Price * Number(productx[i].quantity)) - parseFloat(productx[i].discount) : 0;\r\n\r\n            var setProducts = getTaxAllProduct(findProductValue);\r\n            var products = getTaxCartProduct(setProducts);\r\n            var taxWithProductx = getCheckoutList(products);\r\n            if (products && products.length > 0) {\r\n                productx[i]['line_subtotal'] = products[0].subtotal;\r\n                productx[i]['line_total'] = products[0].total;\r\n                productx[i]['line_tax'] = products[0].total_tax;\r\n                productx[i]['line_subtotal_tax'] = products[0].subtotal_tax;\r\n            }\r\n        }\r\n    })\r\n    //console.log(\"productx updated tax\", productx);\r\n    return productx;\r\n}\r\n/**\r\n * Created By : Shakuntala Jatav\r\n * Creatted Date : 13-03-2020\r\n * @param {*} type \r\n * Description : Showing Tax Rate with name\r\n */\r\n\r\nexport const getTotalTaxByName = (type, productx_line_items) => {\r\n    var placedOrderList = (type == 'completecheckout') ? localStorage.getItem('placedOrderList') ? JSON.parse(localStorage.getItem('placedOrderList')) : null : type;\r\n    //var selected_taxrate_list = localStproductx_line_itemsorage.getItem('SELECTED_TAX') ? JSON.parse(localStorage.getItem('SELECTED_TAX')) : null;\r\n    //SHOP_TAXRATE_LIST\r\n    var selected_taxrate_list = localStorage.getItem('SHOP_TAXRATE_LIST') ? JSON.parse(localStorage.getItem('SHOP_TAXRATE_LIST')) : null;\r\n    var total_taxrate_name = [];\r\n    var total_taxrate_ids = [];\r\n    if (productx_line_items && productx_line_items.length > 0) {\r\n        productx_line_items.map(itemx => {\r\n            if (itemx.line_total_taxes && itemx.line_total_taxes.length > 0) {\r\n                itemx.line_total_taxes.map(subitemx => {\r\n                    total_taxrate_ids.push(subitemx)\r\n                })\r\n            }\r\n        })\r\n    }\r\n    if (placedOrderList && placedOrderList.length > 0) {\r\n        placedOrderList.map(item => {\r\n            if (item.total_taxes && item.total_taxes.length > 0) {\r\n                item.total_taxes.map(subitem => {\r\n                    total_taxrate_ids.push(subitem)\r\n                })\r\n            }\r\n            if (type !== \"completecheckout\") {\r\n                var Taxes = item.Taxes.replace(/^\\/?|\\/?$/, \"\");\r\n                const object1 = JSON.parse(Taxes);\r\n                if (object1) {\r\n                    for (var [key, value] of Object.entries(object1.total)) {\r\n                        total_taxrate_ids.push({ [key]: value })\r\n                    }\r\n                }\r\n            }\r\n        })\r\n    }\r\n    if (total_taxrate_ids && total_taxrate_ids.length > 0) {\r\n        for (var i = 0; i < total_taxrate_ids.length; i++) {\r\n            for (var key in total_taxrate_ids[i]) {\r\n                var filterSelectedTaxRateList = selected_taxrate_list && selected_taxrate_list.filter(match => (match.TaxId == key));\r\n                if (filterSelectedTaxRateList && filterSelectedTaxRateList.length > 0) {\r\n                    var tax_id = filterSelectedTaxRateList[0].TaxId;\r\n                    var tax_name = filterSelectedTaxRateList[0].TaxName;\r\n                    var tax_TaxRate = filterSelectedTaxRateList[0].TaxRate;\r\n                    var tax_amount = parseFloat(total_taxrate_ids[i][key]);\r\n                    var filterValue = total_taxrate_name && total_taxrate_name.find(_match => (_match.tax_id == tax_id));\r\n                    if (filterValue) {\r\n                        total_taxrate_name.map(item => {\r\n                            if (item.tax_id == tax_id) {\r\n                                item['tax_amount'] += tax_amount;\r\n                                \r\n                            }\r\n                        })\r\n                    }\r\n                    if (!filterValue) {\r\n                        total_taxrate_name.push({ 'tax_id': tax_id, 'tax_name': tax_name, 'tax_amount': tax_amount,'TaxRate':tax_TaxRate })\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        //console.log(\"total_taxrate_name\", total_taxrate_name);\r\n    }\r\n    return total_taxrate_name;\r\n}\r\n\r\nfunction percentWiseDiscount(price, discount) {\r\n    var discountAmount = (price * discount) / 100.00;\r\n    return discountAmount;\r\n}\r\n/**\r\n * Created By : Shakuntala jatav\r\n * Created Date : 06-04-2020\r\n * @param {*} item \r\n * @param {*} qty \r\n * Description : 1. for caculate tax varition poup modal\r\n                 2. Apply tax when product add on cart\r\n */\r\n\r\nexport const getVariatioModalProduct = (item, qty) => {\r\n    //console.log(\"getVariatioModalProduct\", item, qty)\r\n\r\n    if (item.isTaxable==false){\r\n        return item;\r\n    }\r\n    var TAX_CASE = getSettingCase();\r\n    //console.log(\"TAX_CASE\", TAX_CASE)\r\n    var all_products = [];\r\n    var price = 0;\r\n    var incl_tax = 0;\r\n    var excl_tax = 0;\r\n    var discount_amount = item.product_discount_amount ? parseFloat(item.product_discount_amount) : 0;\r\n    var after_discount_price = 0;\r\n    switch (TAX_CASE) {\r\n        // case 1\r\n        case 1:\r\n            if (item.WPID && item.TaxStatus !== \"none\") {\r\n                //after_discount_price = item.old_price - discount_amount;\r\n                incl_tax = getInclusiveTax(item.old_price, item.TaxClass)               \r\n                if(item.discount_type == \"Percentage\") {\r\n                  var  productDiscount=percentWiseDiscount(item.old_price-incl_tax, item.new_product_discount_amount)* qty;\r\n                  after_discount_price =  ((item.old_price-incl_tax) * qty) - productDiscount\r\n                }  else{\r\n                    after_discount_price =  ((item.old_price-incl_tax) * qty) - discount_amount;\r\n                }\r\n                if(item.discount_type == \"Percentage\" ){\r\n                    incl_tax = getInclusiveTax(item.old_price-discount_amount, item.TaxClass)\r\n                }else{\r\n                    incl_tax = getInclusiveTax((item.old_price * qty )-discount_amount, item.TaxClass)\r\n                }\r\n\r\n                //incl_tax = getInclusiveTax(after_discount_price, item.TaxClass)\r\n                //item['Price'] = after_discount_price * qty\r\n                item['incl_tax'] = item.discount_type == \"Percentage\" ? incl_tax * qty : incl_tax;\r\n                // ******** comented below line  to solve qty * issue on after discount *****//\r\n                // **tst** item['after_discount'] = item.discount_type == \"Percentage\" ? after_discount_price * qty : after_discount_price;\r\n\r\n                //**tst** remove qty multiplication from after discount\r\n                item['after_discount'] = after_discount_price;\r\n            }\r\n            all_products = item;\r\n            break;\r\n        // case 2\r\n        case 2:\r\n            if (item.WPID && item.TaxStatus !== \"none\") {\r\n                //after_discount_price = item.old_price - discount_amount;               \r\n                if(item.discount_type == \"Percentage\") {\r\n                    var  productDiscount=percentWiseDiscount(item.old_price-incl_tax, item.new_product_discount_amount)* qty;\r\n                    after_discount_price =  ((item.old_price-incl_tax) * qty) - productDiscount\r\n                  }  else{\r\n                      after_discount_price =  ((item.old_price-incl_tax) * qty) - discount_amount;\r\n                  }\r\n                  if(item.discount_type == \"Percentage\" ){\r\n                    excl_tax = getInclusiveTax(item.old_price-discount_amount, item.TaxClass)\r\n                    }else{\r\n                        excl_tax = getInclusiveTax((item.old_price * qty )-discount_amount, item.TaxClass)\r\n                    }\r\n                \r\n                  price = cartPriceWithTax(after_discount_price, 2, item.TaxClass)\r\n                //item['Price'] = price * qty\r\n                item['excl_tax'] = item.discount_type == \"Percentage\" ? excl_tax * qty : excl_tax;\r\n                item['after_discount'] = after_discount_price;\r\n            }\r\n            all_products = item;\r\n            break;\r\n        // case 3\r\n        case 3:\r\n            if (item.WPID && item.TaxStatus !== \"none\") {\r\n                //after_discount_price = item.old_price - discount_amount;\r\n                if(item.discount_type == \"Percentage\") {\r\n                    var  productDiscount=percentWiseDiscount(item.old_price-incl_tax, item.new_product_discount_amount)* qty;\r\n                    after_discount_price =  ((item.old_price-incl_tax) * qty) - productDiscount\r\n                  }  else{\r\n                    after_discount_price = item.discount_type == \"Percentage\" ? item.old_price - discount_amount : (item.old_price * qty) - discount_amount;\r\n                  }\r\n                  if(item.discount_type == \"Percentage\" ){\r\n                    incl_tax = getInclusiveTax(item.old_price-discount_amount, item.TaxClass)\r\n                    }else{\r\n                        incl_tax = getInclusiveTax((item.old_price * qty )-discount_amount, item.TaxClass)\r\n                    }  \r\n                 \r\n                //item['Price'] = after_discount_price * qty\r\n                item['incl_tax'] = item.discount_type == \"Percentage\" ? incl_tax * qty : incl_tax;\r\n                item['after_discount'] = after_discount_price;\r\n            }\r\n            all_products = item;\r\n            break;\r\n        // case 4\r\n        case 4:\r\n            if (item.WPID && item.TaxStatus !== \"none\") {\r\n                //after_discount_price = item.old_price - discount_amount;\r\n                if(item.discount_type == \"Percentage\") {\r\n                    var  productDiscount=percentWiseDiscount(item.old_price-incl_tax, item.new_product_discount_amount)* qty;\r\n                    after_discount_price =  ((item.old_price-incl_tax) * qty) - productDiscount\r\n                  }  else{\r\n                    after_discount_price = item.discount_type == \"Percentage\" ? item.old_price - discount_amount : (item.old_price * qty) - discount_amount;\r\n                  }\r\n                  if(item.discount_type == \"Percentage\" ){\r\n                    excl_tax = getInclusiveTax(item.old_price-discount_amount, item.TaxClass)\r\n                    }else{\r\n                        excl_tax = getInclusiveTax((item.old_price * qty )-discount_amount, item.TaxClass)\r\n                    }\r\n                price = cartPriceWithTax(after_discount_price, 4, item.TaxClass);\r\n                //item['Price'] = price * qty\r\n                item['excl_tax'] = item.discount_type == \"Percentage\" ? excl_tax * qty : excl_tax;;\r\n                item['after_discount'] = after_discount_price;\r\n            }\r\n            all_products = item;\r\n            break;\r\n        // case 5\r\n        case 5:\r\n            if (item.WPID && item.TaxStatus !== \"none\") {\r\n                //after_discount_price = item.old_price - discount_amount;\r\n                if(item.discount_type == \"Percentage\") {\r\n                    var  productDiscount=percentWiseDiscount(item.old_price-incl_tax, item.new_product_discount_amount)* qty;\r\n                    after_discount_price =  ((item.old_price-incl_tax) * qty) - productDiscount\r\n                  }  else{\r\n                    after_discount_price = item.discount_type == \"Percentage\" ? item.old_price - discount_amount : (item.old_price * qty) - discount_amount;\r\n                  }\r\n                  if(item.discount_type == \"Percentage\" ){\r\n                    incl_tax = getExclusiveTax(item.old_price-discount_amount, item.TaxClass)\r\n                    }else{\r\n                        incl_tax = getExclusiveTax((item.old_price * qty )-discount_amount, item.TaxClass)\r\n                    }\r\n                 \r\n                //item['Price'] = item.Price * qty\r\n                item['incl_tax'] = item.discount_type == \"Percentage\" ? incl_tax * qty : incl_tax;\r\n                item['after_discount'] = after_discount_price;\r\n            }\r\n            all_products = item;\r\n            break;\r\n        // case 6\r\n        case 6:\r\n            if (item.WPID && item.TaxStatus !== \"none\") {\r\n                //after_discount_price = item.old_price - discount_amount;\r\n                if(item.discount_type == \"Percentage\") {\r\n                    var  productDiscount=percentWiseDiscount(item.old_price-incl_tax, item.new_product_discount_amount)* qty;\r\n                    after_discount_price =  ((item.old_price-incl_tax) * qty) - productDiscount\r\n                  }  else{\r\n                    after_discount_price = item.discount_type == \"Percentage\" ? item.old_price - discount_amount : (item.old_price * qty) - discount_amount;\r\n                  }\r\n\r\n                  if(item.discount_type == \"Percentage\" ){\r\n                    excl_tax = getExclusiveTax(item.old_price-discount_amount, item.TaxClass)\r\n                }else{\r\n                  excl_tax = getExclusiveTax(after_discount_price, item.TaxClass)\r\n                }\r\n                //item['Price'] = after_discount_price * old_price\r\n                item['excl_tax'] = item.discount_type == \"Percentage\" ? excl_tax * qty : excl_tax;;\r\n                item['after_discount'] = after_discount_price;\r\n            }\r\n            all_products = item;\r\n            break;\r\n        // case 7\r\n        case 7:\r\n            if (item.WPID && item.TaxStatus !== \"none\") {\r\n                //after_discount_price = item.old_price - discount_amount;\r\n                if(item.discount_type == \"Percentage\") {\r\n                    var  productDiscount=percentWiseDiscount(item.old_price-incl_tax, item.new_product_discount_amount)* qty;\r\n                    after_discount_price =  ((item.old_price-incl_tax) * qty) - productDiscount\r\n                  }  else{\r\n                    after_discount_price = item.discount_type == \"Percentage\" ? item.old_price - discount_amount : (item.old_price * qty) - discount_amount;\r\n                  }\r\n                price = cartPriceWithTax(after_discount_price, 7, item.TaxClass)\r\n                if(item.discount_type == \"Percentage\" ){\r\n                    incl_tax = getExclusiveTax(item.old_price-discount_amount, item.TaxClass)\r\n                }else{\r\n                    incl_tax = getExclusiveTax(after_discount_price, item.TaxClass)\r\n                }\r\n                //item['Price'] = price * qty\r\n                item['incl_tax'] = item.discount_type == \"Percentage\" ? incl_tax * qty : incl_tax;\r\n                item['after_discount'] = after_discount_price;\r\n            }\r\n            all_products = item;\r\n            break;\r\n        // case 8\r\n        default:\r\n            if (item.WPID && item.TaxStatus !== \"none\") {\r\n                if(item.discount_type == \"Percentage\") {\r\n                    var  productDiscount=percentWiseDiscount(item.old_price-incl_tax, item.new_product_discount_amount)* qty;\r\n                    after_discount_price =  ((item.old_price-incl_tax) * qty) - productDiscount\r\n                  }  else{\r\n                after_discount_price = item.discount_type == \"Percentage\" ? item.old_price - discount_amount : (item.old_price * qty) - discount_amount;\r\n                  }\r\n                  if(item.discount_type == \"Percentage\" ){\r\n                    excl_tax = getExclusiveTax(item.old_price-discount_amount, item.TaxClass)\r\n                }else{\r\n                    excl_tax = getExclusiveTax(after_discount_price, item.TaxClass)\r\n                }\r\n                //item['Price'] = after_discount_price * qty\r\n                item['excl_tax'] = item.discount_type == \"Percentage\" ? excl_tax * qty : excl_tax;\r\n                item['after_discount'] = after_discount_price;\r\n            }\r\n            all_products = item;\r\n            break;\r\n    }\r\n    return all_products\r\n}\r\n\r\nexport const TaxSetting = {\r\n    getTaxAllProduct, productPriceWithTax, getTaxCartProduct, cartPriceWithTax, getInclusiveTax, getExclusiveTax, getCheckoutList, getDiscountAmount, getSettingCase, typeOfTax, changeTaxRate, getExtensionCheckoutList, setListActivityToCheckout, RoundAmount,\r\n    getProductxChlidProductTax, getTotalTaxByName\r\n}\r\nexport default TaxSetting;"],"mappings":"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"},"metadata":{},"sourceType":"module"}