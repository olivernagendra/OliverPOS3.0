{"ast":null,"code":"var _jsxFileName = \"D:\\\\OliverPOS\\\\OliverPOS3.0\\\\src\\\\components\\\\dashboard\\\\AdvancedSearch.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useLayoutEffect, useState } from \"react\";\nimport { useSelector } from 'react-redux';\nimport X_Icon_DarkBlue from '../../images/svg/X-Icon-DarkBlue.svg';\nimport down_angled_bracket from '../../images/svg/down-angled-bracket.svg';\nimport BlueDot from '../../images/svg/BlueDot.svg';\nimport ViewIcon from '../../images/svg/ViewIcon.svg';\nimport Add_Icon_White from '../../images/svg/Add-Icon-White.svg';\nimport Transactions_Icon_White from '../../images/svg/Transactions-Icon-White.svg';\nimport CircledPlus_Icon_Blue from '../../images/svg/CircledPlus-Icon-Blue.svg';\nimport { useRoutes } from \"react-router-dom\";\nimport FetchIndexDB from \"../../settings/FetchIndexDB\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst AdvancedSearch = () => {\n  _s();\n\n  const [allProductList, setAllProductList] = useState([]);\n  const [totalRecords, setTotalRecords] = useState(0);\n  const [parentProductList, setParentProductList] = useState([]);\n  const [product_List, setProduct_List] = useState([]);\n  const [filtered, setfiltered] = useState([]);\n  const [allCustomerList, setAllCustomerList] = useState([]);\n\n  const getProductFromIDB = () => {\n    var allData = [];\n    var idbKeyval = FetchIndexDB.fetchIndexDb();\n    idbKeyval.get('CustomerList').then(val => {\n      if (!val || val.length == 0 || val == null || val == \"\") {\n        setAllCustomerList([]);\n      } else {\n        setAllCustomerList(val);\n      }\n\n      console.log('CustomerList---' + val && val.length);\n    });\n    idbKeyval.get('ProductList').then(val => {\n      if (!val || val.length == 0 || val == null || val == \"\") {\n        setAllProductList([]);\n      } else {\n        setAllProductList(val); //getTaxAllProduct(val);\n\n        val.map(item => {\n          if (item.ParentId == 0 && (item.ManagingStock == false || item.ManagingStock == true && item.StockQuantity > -1)) {\n            allData.push(item);\n          }\n        });\n\n        if (allData.length == 0) {}\n\n        setParentProductList(allData);\n        setTotalRecords(allData ? allData.length : 0); //For temporary\n\n        setProduct_List(allData ? allData : []); // this.loadingData();\n        // this.setState({ isLoading: false });\n      }\n    });\n  };\n\n  let useCancelled = false;\n  useEffect(() => {\n    if (useCancelled == false) {\n      getProductFromIDB();\n      console.log(product_List);\n    }\n\n    return () => {\n      useCancelled = true;\n    };\n  }, []);\n  var _SubCategory = [];\n\n  const retrunItrateLoop = (found, filterCategoryCode) => {\n    var setSubCategory = _SubCategory; // localStorage.getItem(\"setSubCategory\") ? JSON.parse(localStorage.getItem(\"setSubCategory\")) : [];\n\n    filterCategoryCode.push(found.Code);\n\n    if (found && found.Subcategories && found.Subcategories.length > 0) {\n      found.Subcategories.map(element => {\n        setSubCategory.push(element);\n        filterCategoryCode.push(element.Code);\n\n        if (element && element.Subcategories && element.Subcategories.length > 0) {\n          retrunItrateLoop(element, filterCategoryCode);\n        }\n      }); // const arrayUniqueByKey = [...new Map(setSubCategory.map(item =>\n      //     [item['Code'], item])).values()];\n\n      const arrayUniqueByKeyArray = [...new Map(filterCategoryCode.map(item => [item, item])).values()];\n      _SubCategory = arrayUniqueByKeyArray; //localStorage.setItem(\"setSubCategory\", JSON.stringify(arrayUniqueByKey))\n\n      return arrayUniqueByKeyArray;\n    }\n\n    return filterCategoryCode;\n  };\n\n  const productDataSearch = event => {\n    console.log(\"event\" + event.target.value);\n    var item1 = event.target.value;\n    setfiltered([]);\n\n    if (item1 == '') {\n      setProduct_List(allProductList);\n      return;\n    }\n\n    var _filtered = [];\n    var value = item1; // Search in Products\n\n    var serchFromAll = product_List.filter(item => item.Title && item.Title.toLowerCase().includes(value.toLowerCase()) || item.Barcode && item.Barcode.toString().toLowerCase().includes(value.toLowerCase()) || item.Sku && item.Sku.toString().toLowerCase().includes(value.toLowerCase())); //-------//Filter child and parent-------------\n\n    var parentArr = [];\n    serchFromAll && serchFromAll.map(item => {\n      if (item.ParentId !== 0) {\n        var parrentofChild = product_List.find(function (element) {\n          return element.WPID === item.ParentId;\n        });\n        if (parrentofChild) parentArr.push(parrentofChild);\n      }\n    });\n    serchFromAll = [...new Set([...serchFromAll, ...parentArr])];\n\n    if (!serchFromAll || serchFromAll.length > 0) {\n      var parentProduct = serchFromAll.filter(item => {\n        return item.ParentId === 0;\n      });\n      parentProduct = parentProduct ? parentProduct : [];\n      _filtered = [...new Set([..._filtered, ...parentProduct])];\n    } // Search in Customer\n\n\n    var filteredCustomer = allCustomerList.filter(item => item.FirstName && item.FirstName.toLowerCase().includes(value.toLowerCase()) || item.LastName && item.LastName.toString().toLowerCase().includes(value.toLowerCase()) || item.Contact && item.Contact.toString().toLowerCase().includes(value.toLowerCase()) || item.Email && item.Email.toString().toLowerCase().includes(value.toLowerCase()));\n    console.log(\"---filteredCustomer---\" + JSON.stringify(filteredCustomer)); // Search by Attributes\n\n    parentProductList && parentProductList.map(item => {\n      item.ProductAttributes && item.ProductAttributes.map(attri => {\n        if (String(attri.Slug).toLowerCase().toString().indexOf(String(value).toLowerCase()) !== -1 || String(attri.Name).toLowerCase().toString().indexOf(String(value).toLowerCase()) !== -1) {\n          _filtered.push(item);\n        }\n      });\n    }); // Search by Categories\n\n    parentProductList && parentProductList.map(item => {\n      item.Categories && item.Categories !== undefined && item.Categories.split(\",\").map(category => {\n        if (String(category).toLowerCase().toString().indexOf(String(value).toLowerCase()) !== -1) {\n          if (_filtered.indexOf(item) === -1) {\n            _filtered.push(item);\n          }\n        }\n      });\n    }); // Search by Sub Attributes\n\n    parentProductList && parentProductList.map(item => {\n      item.ProductAttributes && item.ProductAttributes.map(proAtt => {\n        var dataSplitArycomma = proAtt.Option.split(',');\n        dataSplitArycomma && dataSplitArycomma !== undefined && dataSplitArycomma.map(opt => {\n          if (String(opt).toLowerCase().toString().indexOf(String(value).toLowerCase()) !== -1) {\n            if (_filtered.indexOf(item) === -1) {\n              _filtered.push(item);\n            }\n          }\n        });\n      });\n    }); //}\n    // _filtered = [...new Map(_filtered.map(item =>\n    //     [item, item])).values()];\n    // console.log(\"----filtered---\" + JSON.stringify(_filtered.length));\n    //if(_filtered && _filtered.length>0)\n\n    _filtered = _filtered.filter(item => {\n      return item.ParentId === 0;\n    });\n    console.log(\"----filtered--->>\" + JSON.stringify(_filtered.length));\n    setProduct_List(_filtered);\n    setfiltered(_filtered);\n  }; // console.log(allProductList)\n  // console.log(totalRecords)\n  // console.log(parentProductList)\n\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"subwindow advanced-search\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"subwindow-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Advanced Search\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"close-subwindow\",\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: X_Icon_DarkBlue,\n          alt: \"\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 196,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        id: \"advancedSearchBar\",\n        placeholder: \"Start typing to search...\",\n        onChange: e => productDataSearch(e)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"subwindow-body\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"left-col\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Search by\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"radio-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            id: \"mobileSearchModToggle\",\n            className: \"dropdown-input\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                children: \"Search for:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 205,\n                columnNumber: 28\n              }, this), \" All Results\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 205,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n              src: down_angled_bracket,\n              alt: \"\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 206,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 204,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"radio\",\n              id: \"allResults\",\n              name: \"search_modifier\",\n              value: \"allResults\",\n              checked: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 209,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"custom-radio\",\n              children: /*#__PURE__*/_jsxDEV(\"img\", {\n                src: BlueDot,\n                alt: \"\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 211,\n                columnNumber: 29\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 210,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"All Results\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 213,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 208,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"radio\",\n              id: \"products\",\n              name: \"search_modifier\",\n              value: \"products\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 216,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"custom-radio\",\n              children: /*#__PURE__*/_jsxDEV(\"img\", {\n                src: BlueDot,\n                alt: \"\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 218,\n                columnNumber: 29\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 217,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"Products\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 220,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 215,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"radio\",\n              id: \"customers\",\n              name: \"search_modifier\",\n              value: \"customers\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 223,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"custom-radio\",\n              children: /*#__PURE__*/_jsxDEV(\"img\", {\n                src: BlueDot,\n                alt: \"\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 225,\n                columnNumber: 29\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 224,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"Customers\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 227,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 222,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"radio\",\n              id: \"groups\",\n              name: \"search_modifier\",\n              value: \"groups\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 230,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"custom-radio\",\n              children: /*#__PURE__*/_jsxDEV(\"img\", {\n                src: BlueDot,\n                alt: \"\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 232,\n                columnNumber: 29\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 231,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"Groups\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 234,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 229,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Recent Searches\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 237,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"recent-searches\",\n          children: [/*#__PURE__*/_jsxDEV(\"a\", {\n            href: \"#\",\n            children: \"Sam Moss\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 239,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n            href: \"#\",\n            children: \"Graphic T-Shirts\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 240,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n            href: \"#\",\n            children: \"Hoodies\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 241,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n            href: \"#\",\n            children: \"Freddy Mercury\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 242,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n            href: \"#\",\n            children: \"Espresso Coffee\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 243,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n            href: \"#\",\n            children: \"Shoes\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 244,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 238,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"right-col\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"header\",\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [/*#__PURE__*/_jsxDEV(\"b\", {\n              children: \"Results\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 249,\n              columnNumber: 24\n            }, this), \" (\", filtered.length, \" search results)\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 249,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 248,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"body\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"no-results\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"style1\",\n              children: \"No results found.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 253,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"style2\",\n              children: [\"Sorry, your search did not match any results. \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 255,\n                columnNumber: 75\n              }, this), \"Try double checking your spelling or \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 256,\n                columnNumber: 66\n              }, this), \"searching for a similar product.\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 254,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"divider\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 259,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"style2\",\n              children: \"Customer not found? Try creating a new customer:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 260,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                src: CircledPlus_Icon_Blue,\n                alt: \"\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 262,\n                columnNumber: 29\n              }, this), \"Create New Customer\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 261,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 252,\n            columnNumber: 21\n          }, this), product_List && product_List.map((item, index) => {\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"search-result product\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"col\",\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"style1\",\n                  children: \"Product\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 298,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"style2\",\n                  children: item.Title\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 299,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"style3\",\n                  children: [\"$\", item.Price]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 301,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"style3\",\n                  children: [\"SKU#\", item.Sku]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 302,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 292,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"row\",\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"search-view\",\n                  children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                    src: ViewIcon,\n                    alt: \"\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 306,\n                    columnNumber: 41\n                  }, this), \"View\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 305,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"search-add-to-sale\",\n                  children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                    src: Add_Icon_White,\n                    alt: \"\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 310,\n                    columnNumber: 41\n                  }, this), \"Add to Sale\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 309,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 304,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 291,\n              columnNumber: 36\n            }, this);\n          })]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 251,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 247,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 192,\n    columnNumber: 12\n  }, this);\n};\n\n_s(AdvancedSearch, \"+uCYvHjC5WLOFBRDbKjv3Td2jCw=\");\n\n_c = AdvancedSearch;\nexport default AdvancedSearch;\n\nvar _c;\n\n$RefreshReg$(_c, \"AdvancedSearch\");","map":{"version":3,"names":["React","useEffect","useLayoutEffect","useState","useSelector","X_Icon_DarkBlue","down_angled_bracket","BlueDot","ViewIcon","Add_Icon_White","Transactions_Icon_White","CircledPlus_Icon_Blue","useRoutes","FetchIndexDB","AdvancedSearch","allProductList","setAllProductList","totalRecords","setTotalRecords","parentProductList","setParentProductList","product_List","setProduct_List","filtered","setfiltered","allCustomerList","setAllCustomerList","getProductFromIDB","allData","idbKeyval","fetchIndexDb","get","then","val","length","console","log","map","item","ParentId","ManagingStock","StockQuantity","push","useCancelled","_SubCategory","retrunItrateLoop","found","filterCategoryCode","setSubCategory","Code","Subcategories","element","arrayUniqueByKeyArray","Map","values","productDataSearch","event","target","value","item1","_filtered","serchFromAll","filter","Title","toLowerCase","includes","Barcode","toString","Sku","parentArr","parrentofChild","find","WPID","Set","parentProduct","filteredCustomer","FirstName","LastName","Contact","Email","JSON","stringify","ProductAttributes","attri","String","Slug","indexOf","Name","Categories","undefined","split","category","proAtt","dataSplitArycomma","Option","opt","e","index","Price"],"sources":["D:/OliverPOS/OliverPOS3.0/src/components/dashboard/AdvancedSearch.js"],"sourcesContent":["import React, { useEffect, useLayoutEffect, useState } from \"react\";\r\nimport { useSelector } from 'react-redux';\r\nimport X_Icon_DarkBlue from '../../images/svg/X-Icon-DarkBlue.svg';\r\nimport down_angled_bracket from '../../images/svg/down-angled-bracket.svg';\r\nimport BlueDot from '../../images/svg/BlueDot.svg';\r\nimport ViewIcon from '../../images/svg/ViewIcon.svg';\r\nimport Add_Icon_White from '../../images/svg/Add-Icon-White.svg';\r\nimport Transactions_Icon_White from '../../images/svg/Transactions-Icon-White.svg';\r\nimport CircledPlus_Icon_Blue from '../../images/svg/CircledPlus-Icon-Blue.svg';\r\nimport { useRoutes } from \"react-router-dom\";\r\nimport FetchIndexDB from \"../../settings/FetchIndexDB\";\r\nconst AdvancedSearch = () => {\r\n    const [allProductList, setAllProductList] = useState([])\r\n    const [totalRecords, setTotalRecords] = useState(0)\r\n    const [parentProductList, setParentProductList] = useState([])\r\n    const [product_List, setProduct_List] = useState([])\r\n\r\n    const [filtered, setfiltered] = useState([]);\r\n    const [allCustomerList, setAllCustomerList] = useState([])\r\n\r\n    const getProductFromIDB = () => {\r\n        var allData = [];\r\n        var idbKeyval = FetchIndexDB.fetchIndexDb();\r\n        idbKeyval.get('CustomerList').then(val => {\r\n            if (!val || val.length == 0 || val == null || val == \"\") {\r\n                setAllCustomerList([]);\r\n            }\r\n            else\r\n            {\r\n                setAllCustomerList(val);\r\n            }\r\n            console.log('CustomerList---'+val && val.length)\r\n        })\r\n        idbKeyval.get('ProductList').then(val => {\r\n            if (!val || val.length == 0 || val == null || val == \"\") {\r\n                setAllProductList([]);\r\n            }\r\n            else {\r\n                setAllProductList(val); //getTaxAllProduct(val);\r\n                val.map(item => {\r\n                    if (item.ParentId == 0 && (item.ManagingStock == false || (item.ManagingStock == true && item.StockQuantity > -1))) {\r\n                        allData.push(item);\r\n                    }\r\n                })\r\n\r\n                if (allData.length == 0) {\r\n                }\r\n                setParentProductList(allData)\r\n                setTotalRecords(allData ? allData.length : 0);\r\n                //For temporary\r\n                setProduct_List(allData ? allData : []);\r\n\r\n                // this.loadingData();\r\n                // this.setState({ isLoading: false });\r\n            }\r\n        });\r\n\r\n    }\r\n    let useCancelled = false;\r\n    useEffect(() => {\r\n        if (useCancelled == false) {\r\n            getProductFromIDB()\r\n            console.log(product_List)\r\n        }\r\n        return () => {\r\n            useCancelled = true;\r\n        }\r\n\r\n    }, []);\r\n\r\n    var _SubCategory = [];\r\n    const retrunItrateLoop = (found, filterCategoryCode) => {\r\n        var setSubCategory = _SubCategory;// localStorage.getItem(\"setSubCategory\") ? JSON.parse(localStorage.getItem(\"setSubCategory\")) : [];\r\n        filterCategoryCode.push(found.Code)\r\n        if (found && found.Subcategories && found.Subcategories.length > 0) {\r\n            found.Subcategories.map(element => {\r\n                setSubCategory.push(element)\r\n                filterCategoryCode.push(element.Code)\r\n                if (element && element.Subcategories && element.Subcategories.length > 0) {\r\n                    retrunItrateLoop(element, filterCategoryCode)\r\n                }\r\n            })\r\n            // const arrayUniqueByKey = [...new Map(setSubCategory.map(item =>\r\n            //     [item['Code'], item])).values()];\r\n            const arrayUniqueByKeyArray = [...new Map(filterCategoryCode.map(item =>\r\n                [item, item])).values()];\r\n            _SubCategory = arrayUniqueByKeyArray;\r\n            //localStorage.setItem(\"setSubCategory\", JSON.stringify(arrayUniqueByKey))\r\n            return arrayUniqueByKeyArray\r\n        }\r\n        return filterCategoryCode\r\n    }\r\n\r\n    const productDataSearch = (event) => {\r\n        console.log(\"event\" + event.target.value)\r\n        var item1 = event.target.value;\r\n        setfiltered([]);\r\n        if (item1 == '') {\r\n            setProduct_List(allProductList);\r\n            return;\r\n        }\r\n        var _filtered = [];\r\n        var value = item1;\r\n\r\n        // Search in Products\r\n        var serchFromAll = product_List.filter((item) => (\r\n            (item.Title && item.Title.toLowerCase().includes(value.toLowerCase()))\r\n            || (item.Barcode && item.Barcode.toString().toLowerCase().includes(value.toLowerCase()))\r\n            || (item.Sku && item.Sku.toString().toLowerCase().includes(value.toLowerCase()))\r\n        ))\r\n        //-------//Filter child and parent-------------\r\n        var parentArr = [];\r\n        serchFromAll && serchFromAll.map(item => {\r\n            if (item.ParentId !== 0) {\r\n                var parrentofChild = product_List.find(function (element) {\r\n                    return (element.WPID === item.ParentId)\r\n                });\r\n                if (parrentofChild)\r\n                    parentArr.push(parrentofChild);\r\n            }\r\n        })\r\n        serchFromAll = [...new Set([...serchFromAll, ...parentArr])];\r\n        if (!serchFromAll || serchFromAll.length > 0) {\r\n            var parentProduct = serchFromAll.filter(item => {\r\n                return (item.ParentId === 0)\r\n            })\r\n            parentProduct = parentProduct ? parentProduct : []\r\n            _filtered = [...new Set([..._filtered, ...parentProduct])];\r\n        }\r\n\r\n       // Search in Customer\r\n        var filteredCustomer = allCustomerList.filter((item) => (\r\n            (item.FirstName && item.FirstName.toLowerCase().includes(value.toLowerCase()))\r\n            || (item.LastName && item.LastName.toString().toLowerCase().includes(value.toLowerCase()))\r\n            || (item.Contact && item.Contact.toString().toLowerCase().includes(value.toLowerCase()))\r\n            || (item.Email && item.Email.toString().toLowerCase().includes(value.toLowerCase()))\r\n        ))\r\n        console.log(\"---filteredCustomer---\"+JSON.stringify(filteredCustomer));\r\n\r\n        // Search by Attributes\r\n        parentProductList && parentProductList.map((item) => {\r\n            item.ProductAttributes && item.ProductAttributes.map(attri => {\r\n                if (String(attri.Slug).toLowerCase().toString().indexOf(String(value).toLowerCase()) !== -1 ||\r\n                    String(attri.Name).toLowerCase().toString().indexOf(String(value).toLowerCase()) !== -1) {\r\n                    _filtered.push(item)\r\n                }\r\n            })\r\n        })\r\n        // Search by Categories\r\n        parentProductList && parentProductList.map((item) => {\r\n            item.Categories && item.Categories !== undefined && item.Categories.split(\",\").map(category => {\r\n                if (String(category).toLowerCase().toString().indexOf(String(value).toLowerCase()) !== -1) {\r\n                    if (_filtered.indexOf(item) === -1) {\r\n                        _filtered.push(item)\r\n                    }\r\n                }\r\n            })\r\n        })\r\n        // Search by Sub Attributes\r\n        parentProductList && parentProductList.map((item) => {\r\n            item.ProductAttributes && item.ProductAttributes.map(proAtt => {\r\n                var dataSplitArycomma = proAtt.Option.split(',');\r\n                dataSplitArycomma && dataSplitArycomma !== undefined && dataSplitArycomma.map(opt => {\r\n                    if (String(opt).toLowerCase().toString().indexOf(String(value).toLowerCase()) !== -1) {\r\n                        if (_filtered.indexOf(item) === -1) {\r\n                            _filtered.push(item)\r\n                        }\r\n                    }\r\n                })\r\n            })\r\n        })\r\n\r\n        //}\r\n        // _filtered = [...new Map(_filtered.map(item =>\r\n        //     [item, item])).values()];\r\n        // console.log(\"----filtered---\" + JSON.stringify(_filtered.length));\r\n        //if(_filtered && _filtered.length>0)\r\n\r\n        _filtered = _filtered.filter(item => {\r\n            return (item.ParentId === 0)\r\n        })\r\n        console.log(\"----filtered--->>\" + JSON.stringify(_filtered.length));\r\n        setProduct_List(_filtered);\r\n        setfiltered(_filtered);\r\n\r\n    }\r\n    // console.log(allProductList)\r\n    // console.log(totalRecords)\r\n    // console.log(parentProductList)\r\n\r\n\r\n    return <div className=\"subwindow advanced-search\">\r\n        <div className=\"subwindow-header\">\r\n            <p>Advanced Search</p>\r\n            <button className=\"close-subwindow\">\r\n                <img src={X_Icon_DarkBlue} alt=\"\" />\r\n            </button>\r\n            <input type=\"text\" id=\"advancedSearchBar\" placeholder=\"Start typing to search...\" onChange={e => productDataSearch(e)} />\r\n        </div>\r\n        <div className=\"subwindow-body\">\r\n            <div className=\"left-col\">\r\n                <p>Search by</p>\r\n                <div className=\"radio-group\">\r\n                    <div id=\"mobileSearchModToggle\" className=\"dropdown-input\">\r\n                        <p><b>Search for:</b> All Results</p>\r\n                        <img src={down_angled_bracket} alt=\"\" />\r\n                    </div>\r\n                    <label>\r\n                        <input type=\"radio\" id=\"allResults\" name=\"search_modifier\" value=\"allResults\" checked />\r\n                        <div className=\"custom-radio\">\r\n                            <img src={BlueDot} alt=\"\" />\r\n                        </div>\r\n                        <p>All Results</p>\r\n                    </label>\r\n                    <label>\r\n                        <input type=\"radio\" id=\"products\" name=\"search_modifier\" value=\"products\" />\r\n                        <div className=\"custom-radio\">\r\n                            <img src={BlueDot} alt=\"\" />\r\n                        </div>\r\n                        <p>Products</p>\r\n                    </label>\r\n                    <label>\r\n                        <input type=\"radio\" id=\"customers\" name=\"search_modifier\" value=\"customers\" />\r\n                        <div className=\"custom-radio\">\r\n                            <img src={BlueDot} alt=\"\" />\r\n                        </div>\r\n                        <p>Customers</p>\r\n                    </label>\r\n                    <label>\r\n                        <input type=\"radio\" id=\"groups\" name=\"search_modifier\" value=\"groups\" />\r\n                        <div className=\"custom-radio\">\r\n                            <img src={BlueDot} alt=\"\" />\r\n                        </div>\r\n                        <p>Groups</p>\r\n                    </label>\r\n                </div>\r\n                <p>Recent Searches</p>\r\n                <div className=\"recent-searches\">\r\n                    <a href=\"#\">Sam Moss</a>\r\n                    <a href=\"#\">Graphic T-Shirts</a>\r\n                    <a href=\"#\">Hoodies</a>\r\n                    <a href=\"#\">Freddy Mercury</a>\r\n                    <a href=\"#\">Espresso Coffee</a>\r\n                    <a href=\"#\">Shoes</a>\r\n                </div>\r\n            </div>\r\n            <div className=\"right-col\">\r\n                <div className=\"header\">\r\n                    <p><b>Results</b> ({filtered.length} search results)</p>\r\n                </div>\r\n                <div className=\"body\">\r\n                    <div className=\"no-results\">\r\n                        <p className=\"style1\">No results found.</p>\r\n                        <p className=\"style2\">\r\n                            Sorry, your search did not match any results. <br />\r\n                            Try double checking your spelling or <br />\r\n                            searching for a similar product.\r\n                        </p>\r\n                        <div className=\"divider\"></div>\r\n                        <p className=\"style2\">Customer not found? Try creating a new customer:</p>\r\n                        <button>\r\n                            <img src={CircledPlus_Icon_Blue} alt=\"\" />\r\n                            Create New Customer\r\n                        </button>\r\n                    </div>\r\n                    {/* <div className=\"search-result customer\">\r\n                        <div className=\"col\">\r\n                            <p className=\"style1\">Customer</p>\r\n                            <p className=\"style2\">Freddy Mercury</p>\r\n                            <p className=\"style3\">queen_of_rock@gmail.com</p>\r\n                            <p className=\"style3\">1 (709) 123-4567</p>\r\n                        </div>\r\n                        <div className=\"row\">\r\n                            <button className=\"search-view\">\r\n                                <img src={ViewIcon} alt=\"\" />\r\n                                View\r\n                            </button>\r\n                            <button className=\"search-transactions\">\r\n                                <img src={Transactions_Icon_White} alt=\"\" />\r\n                                Transactions\r\n                            </button>\r\n                            <button className=\"search-add-to-sale\">\r\n                                <img src={Add_Icon_White} alt=\"\" />\r\n                                Add to Sale\r\n                            </button>\r\n                        </div>\r\n                    </div> */}\r\n\r\n                    {\r\n                        product_List && product_List.map((item, index) => {\r\n                            return <div className=\"search-result product\">\r\n                                <div className=\"col\">\r\n                                    {/* <p className=\"style1\">Product</p>\r\n                            <p className=\"style2\">Funky Fresh White Sneakers long name to get cut off</p>\r\n                            <p className=\"style3\">Funky Shoe Co.</p>\r\n                            <p className=\"style3\">$34.55</p>\r\n                            <p className=\"style3\">SKU# 1386425547424579201546</p> */}\r\n                                    <p className=\"style1\">Product</p>\r\n                                    <p className=\"style2\">{item.Title}</p>\r\n                                    {/* <p className=\"style3\">Funky Shoe Co.</p> */}\r\n                                    <p className=\"style3\">${item.Price}</p>\r\n                                    <p className=\"style3\">SKU#{item.Sku}</p>\r\n                                </div>\r\n                                <div className=\"row\">\r\n                                    <button className=\"search-view\">\r\n                                        <img src={ViewIcon} alt=\"\" />\r\n                                        View\r\n                                    </button>\r\n                                    <button className=\"search-add-to-sale\">\r\n                                        <img src={Add_Icon_White} alt=\"\" />\r\n                                        Add to Sale\r\n                                    </button>\r\n                                </div>\r\n                            </div>\r\n                        })\r\n                    }\r\n                    {/* <div className=\"search-result group\">\r\n                        <div className=\"col\">\r\n                            <p className=\"style1\">Group</p>\r\n                            <p className=\"style2\">Moss Party (Table 5)</p>\r\n                            <p className=\"style3\">Party of 6</p>\r\n                            <p className=\"style3\">Server: Freddy Mercury</p>\r\n                            <p className=\"style3\">Order total: $223.45</p>\r\n                        </div>\r\n                        <div className=\"row\">\r\n                            <button className=\"search-view\">\r\n                                <img src={ViewIcon} alt=\"\" />\r\n                                View\r\n                            </button>\r\n                            <button className=\"search-transactions\">\r\n                                <img src={Transactions_Icon_White} alt=\"\" />\r\n                                Transactions\r\n                            </button>\r\n                            <button className=\"search-add-to-sale\">\r\n                                <img src={Add_Icon_White} alt=\"\" />\r\n                                Add to Sale\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"search-result customer\">\r\n                        <div className=\"col\">\r\n                            <p className=\"style1\">Customer</p>\r\n                            <p className=\"style2\">Freddy Mercury</p>\r\n                            <p className=\"style3\">queen_of_rock@gmail.com</p>\r\n                            <p className=\"style3\">1 (709) 123-4567</p>\r\n                        </div>\r\n                        <div className=\"row\">\r\n                            <button className=\"search-view\">\r\n                                <img src={ViewIcon} alt=\"\" />\r\n                                View\r\n                            </button>\r\n                            <button className=\"search-transactions\">\r\n                                <img src={Transactions_Icon_White} alt=\"\" />\r\n                                Transactions\r\n                            </button>\r\n                            <button className=\"search-add-to-sale\">\r\n                                <img src={Add_Icon_White} alt=\"\" />\r\n                                Add to Sale\r\n                            </button>\r\n                        </div>\r\n                    </div> */}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n}\r\n\r\nexport default AdvancedSearch "],"mappings":"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"},"metadata":{},"sourceType":"module"}