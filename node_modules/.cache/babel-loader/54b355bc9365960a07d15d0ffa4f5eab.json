{"ast":null,"code":"var _jsxFileName = \"D:\\\\OliverPOS\\\\OliverPOS3.0\\\\src\\\\components\\\\login\\\\Login.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useRef, useEffect } from \"react\";\nimport { useNavigate } from 'react-router-dom'; // import FacebookLogin from 'react-facebook-login';\n// import GoogleLogin from 'react-google-login';\n\nimport imglogo from '../../images/svg/Oliver-Horizontal.svg'; // import imgGoogle from '../../images/svg/google-logo.svg'\n// import imgFaceBook from '../../images/svg/facebook-logo.svg'\n// import imgApple from '../../images/svg/apple-logo.svg'\n\nimport Checkmark from '../../images/svg/Checkmark.svg';\nimport { useDispatch, useSelector, shallowEqual } from 'react-redux';\nimport { userLogin, userExternalLogin, GetUserProfileLogin } from '../login/loginSlice';\nimport STATUSES from \"../../constants/apiStatus\";\nimport Config from \"../../Config\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Login() {\n  _s();\n\n  var auth2 = '';\n  const bridgDomain = \"https://hub.oliverpos.com\";\n  const googleLoginBtn = useRef(null);\n  const navigate = useNavigate();\n  const [userEmail, setName] = useState(\"\");\n  const [password, setPassword] = useState(\"\"); // const [fieldErr, setFieldErr] = useState(\"\")\n  // const [usernamedErr, setUsernamedErr] = useState(\"\")\n  // const [wentWrongErr, setWentWrongErr] = useState(\"\")\n  // const [passwordErr, setPasswordErr] = useState(\"\")\n\n  const dispatch = useDispatch();\n  const {\n    status,\n    data,\n    error,\n    is_success\n  } = useSelector(state => state.login);\n  console.log(\"status\", status, \"data\", data, \"error\", error, \"is_success\", is_success);\n\n  if (status == STATUSES.ERROR) {\n    console.log(error);\n  }\n\n  if (status == STATUSES.IDLE && is_success) {\n    navigate('/site');\n  }\n\n  const handleKey = e => {\n    var key = e.which || e.keyCode;\n\n    if (key === 13) {\n      this.handleSubmit(e);\n    }\n  };\n\n  const [userRequest, setUserRequest] = useState({\n    setFieldErr: '',\n    setUsernamedErr: '',\n    setWentWrongErr: '',\n    setPasswordErr: ''\n  });\n\n  const handleSubmit = e => {\n    if (userEmail && password) {\n      setUserRequest({\n        setFieldErr: '',\n        setUsernamedErr: '',\n        setWentWrongErr: '',\n        setPasswordErr: ''\n      }); // if (this.state.check == false) {  //$('#remember').attr('checked')              \n      //     cookies.set('user', '');\n      //     cookies.set('pwd', '');\n      // }\n\n      dispatch(userLogin({\n        \"email\": userEmail,\n        \"password\": password\n      })); // this.state.username = \"\";\n      // this.state.password = \"\";\n    } else {\n      if (!userEmail && !password) {\n        setUserRequest({\n          setFieldErr: 'Email and Password is required',\n          setUsernamedErr: '',\n          setWentWrongErr: '',\n          setPasswordErr: ''\n        }); // $('#username').focus();\n      } else if (!userEmail) {\n        setUserRequest({\n          setFieldErr: '',\n          setUsernamedErr: 'Email is required',\n          setWentWrongErr: '',\n          setPasswordErr: ''\n        }); //  $('#username').focus();\n      } else {\n        setUserRequest({\n          setFieldErr: '',\n          setUsernamedErr: '',\n          setWentWrongErr: '',\n          setPasswordErr: 'Password is required'\n        }); // $('#password').focus();\n      }\n    }\n\n    e.preventDefault();\n  };\n\n  const {\n    setFieldErr,\n    setUsernamedErr,\n    setWentWrongErr,\n    setPasswordErr\n  } = userRequest;\n  var vlidationError = setFieldErr !== '' ? setFieldErr : setUsernamedErr !== \"\" ? setUsernamedErr : setPasswordErr !== '' ? setPasswordErr : setWentWrongErr != '' ? setWentWrongErr : \"\"; // console.log(\"vlidationError\", vlidationError)\n\n  const handleUserLogin = () => {\n    dispatch(userLogin({\n      \"email\": userEmail,\n      \"password\": password\n    }));\n  };\n\n  if (status == STATUSES.error) {\n    console.log(error);\n  }\n\n  if (status == STATUSES.IDLE && is_success) {\n    var loginRes = data && data.content;\n\n    if (loginRes && loginRes.subscriptions !== undefined && loginRes.subscriptions.length > 0) {\n      var userSubscription = loginRes.subscriptions[0];\n      userSubscription && sessionStorage.setItem(\"AUTH_KEY\", userSubscription.subscription_detail.client_guid + \":\" + userSubscription.subscription_detail.server_token);\n      var lang = userSubscription && userSubscription.subscription_permission.language ? userSubscription.subscription_permission.language : 'en';\n      localStorage.setItem(\"LANG\", lang);\n      localStorage.setItem('sitelist', JSON.stringify(loginRes));\n      localStorage.setItem('userId', loginRes.UserId);\n      localStorage.setItem(\"clientDetail\", JSON.stringify(userSubscription));\n      localStorage.setItem(\"hasPin\", loginRes.HasPin && loginRes.HasPin);\n    }\n\n    navigate('/site');\n  }\n\n  const handleNameChange = e => {\n    // console.log(\"event\",e.target.value);\n    setName(e.target.value);\n  };\n\n  const handlePasswordChange = e => {\n    // console.log(\"event\",e.target.value);\n    setPassword(e.target.value);\n  };\n\n  const responseFacebook = response => {\n    localStorage.removeItem('FGLoginData');\n    console.log(\"responseFacebook\", response);\n\n    if (response && response.status !== \"unknown\") {\n      //  this.setState({ isLoginSuccess: \"true\" })\n      localStorage.setItem('FGLoginData', JSON.stringify(response));\n      var dob = response && response.birthday ? response.birthday.split('/') : '';\n      var formatedDob = dob && dob.length == 3 ? '' + dob[2] + '-' + dob[1] + '-' + dob[0] : '';\n      var sendRes = {\n        userLoginInfo: {\n          LoginProvider: response && response.graphDomain ? response.graphDomain : \"\",\n          ProviderKey: response && response.id ? response.id : \"\"\n        },\n        DefaultUserName: response && response.name ? response.name : \"\",\n        Email: response && response.email ? response.email : '',\n        ClientGuid: \"\",\n        SendAuthToken: response && response.accessToken ? response.accessToken : \"\",\n        ModelName: \"\",\n        DeviceId: \"\",\n        Version: \"\",\n        FirstName: response && response.first_name ? response.first_name : \"\",\n        LastName: response && response.last_name ? response.last_name : \"\",\n        AccessToken: response && response.accessToken ? response.accessToken : \"\",\n        Picture: response && response.picture ? response.picture.data && response.picture.data.url : \"\",\n        Gender: response && response.gender ? response.gender : \"\",\n        PhoneNumber: response && response.phoneNumber ? response.PhoneNumber : '',\n        Dob: formatedDob,\n        AgeRange: response && response.age_range && response.age_range.min ? response.age_range.min : \"\",\n        // Address: response && response.address ? response.address : \"\",\n        Address: response && response.location && response.location.name ? response.location.name : \"\",\n        CountryName: response && response.country ? response.country : \"\",\n        CityName: response && response.city ? response.city : \"\"\n      };\n      CallService(sendRes);\n    } else {// this.setState({ isLoginSuccess: \"false\" })\n    }\n  }; // call server on the bassis of facbook and google response \n\n\n  const CallService = FGdata => {\n    console.log(\"FGdata\", FGdata);\n    dispatch(userExternalLogin(FGdata));\n  }; // get user profile ionformation\n\n\n  const getProfileDetails = param => {\n    var data = {\n      access_token: param && param.access_token,\n      userId: param && param.userLoginInfo.ProviderKey\n    };\n    dispatch(GetUserProfileLogin(data));\n  };\n\n  const componentClicked = () => {\n    // this.setState({ isLoginSuccess: \"\" })\n    console.log(\"componentClicked\");\n  };\n\n  const responseGoogle = response => {\n    console.log(response);\n  }; // Life Cycle Method-----------\n\n\n  useEffect(() => {\n    document.addEventListener('AppleIDSignInOnSuccess', event => {\n      // Handle successful response.\n      singInApple();\n      console.log(\"---AppleIDSignInOnSuccess----\" + JSON.stringify(event));\n    }); // Listen for authorization failures.\n\n    document.addEventListener('AppleIDSignInOnFailure', event => {\n      // Handle error.\n      console.log(\"---AppleIDSignInOnFailure---\" + event.detail.error);\n    }); //Apple login Listner END\n\n    googleSDK();\n    appleLogin();\n  }); //Apple login methods Start\n\n  const appleLogin = () => {\n    let appleConnectLoaded = AppleID => {// AppleID.auth.init({\n      //     clientId: \"sell.oliverpos.com\",\n      //     scope: 'name email',\n      //     state: 'origin:web',\n      //     redirectURI: Config.key.APPLE_LOGIN_RETURN_URL,\n      //     usePopup: true\n      // });\n      // setTimeout(() => {//To Remove the default apple logo\n      //     // $(\"svg text\").text('Sign in with Apple')\n      //     // $(\"svg text\").text($(\"svg text\").text().substring(1));\n      //     //  $(\"svg text\").removeAttr(\"textLength\");\n      //     // $(\"svg text\").css(\"fontFamily\", \"Poppins, Helvetica, sans-serif\");\n      //     //   $(\"svg text\").css(\"font-size\", \"0.8rem\");           \n      // }, 100);\n    }; // (function (d, s, cb) {\n    //     var js, fjs = d.getElementsByTagName(s)[0];\n    //     js = d.createElement(s);\n    //     js.src = \"//appleid.cdn-apple.com/appleauth/static/jsapi/appleid/1/en_US/appleid.auth.js\";\n    //     fjs.parentNode.insertBefore(js, fjs);\n    //     js.addEventListener(\"load\", () => cb(AppleID));\n    // }(document, 'script', appleConnectLoaded));\n\n  };\n\n  const googleSDK = () => {\n    // this.setState({ isLoginSuccess: \"\" })\n    window['googleSDKLoaded'] = () => {\n      window['gapi'].load('auth2', () => {\n        auth2 = window['gapi'].auth2.init({\n          client_id: Config.key.GOOGLE_CLIENT_ID,\n          cookiepolicy: 'single_host_origin',\n          scope: 'openid profile email https://www.googleapis.com/auth/user.addresses.read https://www.googleapis.com/auth/user.phonenumbers.read https://www.googleapis.com/auth/profile.agerange.read https://www.googleapis.com/auth/user.birthday.read https://www.googleapis.com/auth/user.gender.read',\n          include_granted_scopes: true // access_type:\"offline\",\n          // response_type:\"code\"\n\n        });\n        prepareGoogleLoginButton();\n      });\n    };\n\n    (function (d, s, id) {\n      var js,\n          fjs = d.getElementsByTagName(s)[0];\n\n      if (d.getElementById(id)) {\n        return;\n      }\n\n      js = d.createElement(s);\n      js.id = id;\n      js.src = \"https://apis.google.com/js/platform.js?onload=googleSDKLoaded\";\n      fjs.parentNode.insertBefore(js, fjs);\n    })(document, 'script', 'google-jssdk');\n  };\n\n  const prepareGoogleLoginButton = () => {\n    localStorage.removeItem('FGLoginData'); // console.log('------ref-----------', googleLoginBtn.current);\n\n    auth2.attachClickHandler(googleLoginBtn.current, {}, googleUser => {\n      localStorage.setItem('FGLoginData', JSON.stringify(googleUser));\n      var profile = googleUser.getBasicProfile();\n      console.log(\"profile\", profile);\n      console.log('Token || ' + googleUser.getAuthResponse().id_token);\n      console.log('ID: ' + profile.getId());\n      console.log('Name: ' + profile.getName());\n      console.log('Image URL: ' + profile.getImageUrl());\n      console.log('Email: ' + profile.getEmail()); // console.log(\"Birthday: \" + profile.getBirthday());\n      //YOUR CODE HERE           \n\n      if (googleUser) {\n        var sendRes = {\n          userLoginInfo: {\n            LoginProvider: \"google\",\n            ProviderKey: profile && profile.getId() ? profile.getId() : \"\"\n          },\n          DefaultUserName: profile && profile.getName() ? profile.getName() : \"\",\n          Email: profile && profile.getEmail() ? profile.getEmail() : '',\n          ClientGuid: \"\",\n          SendAuthToken: googleUser && googleUser.getAuthResponse() && googleUser.getAuthResponse().id_token ? googleUser.getAuthResponse().id_token : \"\",\n          access_token: googleUser && googleUser.getAuthResponse() && googleUser.getAuthResponse().access_token ? googleUser.getAuthResponse().access_token : \"\",\n          ModelName: \"\",\n          DeviceId: \"\",\n          Version: \"\",\n          // FirstName: profile.getGivenName(),\n          // LastName: profile.getFamilyName(),\n          FirstName: '',\n          LastName: \"\",\n          Id: \"\",\n          picture: '',\n          Gender: '',\n          PhoneNumber: '',\n          Dob: '',\n          AgeRange: ''\n        }; //  this.setState({ userRes: sendRes })\n\n        getProfileDetails(sendRes);\n      }\n    }, error => {// this.setState({ isLoginSuccess: \"false\" })\n      // alert(JSON.stringify(error, undefined, 2));\n    });\n  };\n\n  const singInApple = async () => {\n    try {\n      const response = await window.AppleID.auth.signIn();\n\n      if (response != null && typeof response != \"undefined\") {\n        localStorage.removeItem('FGLoginData');\n        localStorage.setItem('FGLoginData', JSON.stringify(response));\n        console.log(\"successful login with apple--\" + JSON.stringify(response));\n        var code = '';\n        var id_token = '';\n        var state = '';\n        var fname = '';\n        var lname = '';\n        var email = '';\n\n        if (response.authorization && typeof response.authorization != \"undefined\") {\n          code = response.authorization.code;\n          id_token = response.authorization.id_token;\n          state = response.authorization.state;\n        }\n\n        if (response.user && typeof response.user != \"undefined\" && response.user.name && response.user.email) {\n          fname = response.user.name.firstName;\n          lname = response.user.name.lastName;\n          email = response.user.email;\n        }\n\n        if (id_token != \"\") {\n          var _data = parseJwt(id_token);\n\n          if (_data != null && _data.email) {\n            email = _data.email;\n          }\n        }\n\n        var data = {\n          FirstName: fname,\n          LastName: lname,\n          Email: email,\n          Id: '',\n          picture: '',\n          Gender: '',\n          Dob: '',\n          AgeRange: '',\n          Address: '',\n          AccessToken: id_token,\n          userLoginInfo: {\n            LoginProvider: \"apple\",\n            ProviderKey: \"\"\n          },\n          DefaultUserName: '',\n          PhoneNumber: '',\n          ClientGuid: '',\n          SendAuthToken: id_token != '' ? true : false,\n          ModelName: '',\n          DeviceId: '',\n          Version: '',\n          CountryName: '',\n          CityName: ''\n        };\n        CallService(data);\n      }\n    } catch (error) {\n      console.log(\"---singInApple---catch--\"); // Handle error.\n    }\n  };\n\n  const parseJwt = token => {\n    var base64Url = token.split('.')[1];\n    var base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');\n    var jsonPayload = decodeURIComponent(atob(base64).split('').map(function (c) {\n      return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);\n    }).join(''));\n    return JSON.parse(jsonPayload);\n  };\n\n  const handleSignInClick = () => {\n    window.location = bridgDomain + '/Account/Register';\n  };\n\n  if (status == STATUSES.LOADING) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \" Loading... \"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 435,\n      columnNumber: 16\n    }, this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"login-wrapper\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"auto-margin-top\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 439,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n      src: imglogo\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 441,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Sign in to your Oliver POS Account\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 442,\n      columnNumber: 9\n    }, this), vlidationError != \"\" && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"danger\",\n      children: setWentWrongErr !== '' ? setWentWrongErr : setFieldErr !== '' ? setFieldErr : setUsernamedErr !== \"\" ? setUsernamedErr : setPasswordErr !== '' ? setPasswordErr : \"\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 445,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      className: \"login-form\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"email\",\n        children: \"Email\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 450,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        id: \"email\",\n        placeholder: \"Enter Email\",\n        onKeyDown: handleKey,\n        onChange: e => handleNameChange(e)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 451,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"password\",\n        children: \"Password\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 452,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"password\",\n        id: \"password\",\n        placeholder: \"Enter Password\",\n        onKeyDown: handleKey,\n        onChange: e => handlePasswordChange(e)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 453,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row\",\n        children: [/*#__PURE__*/_jsxDEV(\"a\", {\n          href: bridgDomain + \"/Account/ForgotPassword?_refrence=sell\",\n          children: \"Forgot your Password?\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 455,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"custom-checkbox-wrapper\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"checkbox\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 457,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"custom-checkbox\",\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              src: Checkmark,\n              alt: \"\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 459,\n              columnNumber: 25\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 458,\n            columnNumber: 21\n          }, this), \"Remember Me?\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 456,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 454,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        onClick: handleSubmit,\n        onKeyDown: handleKey,\n        children: \"Sign In\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 464,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 449,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"or-row\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"divider\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 467,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"OR\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 468,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"divider\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 469,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 466,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Don't have an account?\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 520,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n        href: \"#\",\n        onClick: () => handleSignInClick(),\n        children: \"Sign up Now!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 521,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 519,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"auto-margin-bottom\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 523,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 438,\n    columnNumber: 13\n  }, this);\n}\n\n_s(Login, \"575Yk9KSQGdmeAu9eVyBYdaBVtc=\", false, function () {\n  return [useNavigate, useDispatch, useSelector];\n});\n\n_c = Login;\n;\nexport default Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["React","useState","useRef","useEffect","useNavigate","imglogo","Checkmark","useDispatch","useSelector","shallowEqual","userLogin","userExternalLogin","GetUserProfileLogin","STATUSES","Config","Login","auth2","bridgDomain","googleLoginBtn","navigate","userEmail","setName","password","setPassword","dispatch","status","data","error","is_success","state","login","console","log","ERROR","IDLE","handleKey","e","key","which","keyCode","handleSubmit","userRequest","setUserRequest","setFieldErr","setUsernamedErr","setWentWrongErr","setPasswordErr","preventDefault","vlidationError","handleUserLogin","loginRes","content","subscriptions","undefined","length","userSubscription","sessionStorage","setItem","subscription_detail","client_guid","server_token","lang","subscription_permission","language","localStorage","JSON","stringify","UserId","HasPin","handleNameChange","target","value","handlePasswordChange","responseFacebook","response","removeItem","dob","birthday","split","formatedDob","sendRes","userLoginInfo","LoginProvider","graphDomain","ProviderKey","id","DefaultUserName","name","Email","email","ClientGuid","SendAuthToken","accessToken","ModelName","DeviceId","Version","FirstName","first_name","LastName","last_name","AccessToken","Picture","picture","url","Gender","gender","PhoneNumber","phoneNumber","Dob","AgeRange","age_range","min","Address","location","CountryName","country","CityName","city","CallService","FGdata","getProfileDetails","param","access_token","userId","componentClicked","responseGoogle","document","addEventListener","event","singInApple","detail","googleSDK","appleLogin","appleConnectLoaded","AppleID","window","load","init","client_id","GOOGLE_CLIENT_ID","cookiepolicy","scope","include_granted_scopes","prepareGoogleLoginButton","d","s","js","fjs","getElementsByTagName","getElementById","createElement","src","parentNode","insertBefore","attachClickHandler","current","googleUser","profile","getBasicProfile","getAuthResponse","id_token","getId","getName","getImageUrl","getEmail","Id","auth","signIn","code","fname","lname","authorization","user","firstName","lastName","_data","parseJwt","token","base64Url","base64","replace","jsonPayload","decodeURIComponent","atob","map","c","charCodeAt","toString","slice","join","parse","handleSignInClick","LOADING"],"sources":["D:/OliverPOS/OliverPOS3.0/src/components/login/Login.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from \"react\";\r\nimport { useNavigate } from 'react-router-dom';\r\n// import FacebookLogin from 'react-facebook-login';\r\n// import GoogleLogin from 'react-google-login';\r\nimport imglogo from '../../images/svg/Oliver-Horizontal.svg'\r\n// import imgGoogle from '../../images/svg/google-logo.svg'\r\n// import imgFaceBook from '../../images/svg/facebook-logo.svg'\r\n// import imgApple from '../../images/svg/apple-logo.svg'\r\nimport Checkmark from '../../images/svg/Checkmark.svg'\r\nimport { useDispatch, useSelector, shallowEqual } from 'react-redux';\r\nimport { userLogin, userExternalLogin, GetUserProfileLogin } from '../login/loginSlice';\r\nimport STATUSES from \"../../constants/apiStatus\";\r\nimport Config from \"../../Config\";\r\nfunction Login() {\r\n    var auth2 = ''\r\n    const bridgDomain = \"https://hub.oliverpos.com\";\r\n    const googleLoginBtn = useRef(null);\r\n    const navigate = useNavigate();\r\n    const [userEmail, setName] = useState(\"\")\r\n\r\n    const [password, setPassword] = useState(\"\")\r\n\r\n    // const [fieldErr, setFieldErr] = useState(\"\")\r\n\r\n    // const [usernamedErr, setUsernamedErr] = useState(\"\")\r\n    // const [wentWrongErr, setWentWrongErr] = useState(\"\")\r\n    // const [passwordErr, setPasswordErr] = useState(\"\")\r\n\r\n\r\n\r\n\r\n\r\n    const dispatch = useDispatch();\r\n    const { status, data, error, is_success } = useSelector((state) => state.login)\r\n    console.log(\"status\", status, \"data\", data, \"error\", error, \"is_success\", is_success)\r\n\r\n    if (status == STATUSES.ERROR) {\r\n        console.log(error)\r\n    }\r\n    if (status == STATUSES.IDLE && is_success) {\r\n        navigate('/site')\r\n    }\r\n\r\n\r\n    const handleKey = (e) => {\r\n        var key = e.which || e.keyCode;\r\n        if (key === 13) {\r\n            this.handleSubmit(e);\r\n        }\r\n    }\r\n\r\n    const [userRequest, setUserRequest] = useState({\r\n        setFieldErr: '',\r\n        setUsernamedErr: '',\r\n        setWentWrongErr: '',\r\n        setPasswordErr: '',\r\n    });\r\n\r\n\r\n    const handleSubmit = (e) => {\r\n        if (userEmail && password) {\r\n            setUserRequest({\r\n                setFieldErr: '',\r\n                setUsernamedErr: '',\r\n                setWentWrongErr: '',\r\n                setPasswordErr: '',\r\n            });\r\n            // if (this.state.check == false) {  //$('#remember').attr('checked')              \r\n\r\n            //     cookies.set('user', '');\r\n            //     cookies.set('pwd', '');\r\n            // }\r\n            dispatch(userLogin({ \"email\": userEmail, \"password\": password }))\r\n\r\n            // this.state.username = \"\";\r\n            // this.state.password = \"\";\r\n\r\n        } else {\r\n            if (!userEmail && !password) {\r\n                setUserRequest({\r\n                    setFieldErr: 'Email and Password is required',\r\n                    setUsernamedErr: '',\r\n                    setWentWrongErr: '',\r\n                    setPasswordErr: '',\r\n                });\r\n                // $('#username').focus();\r\n            } else if (!userEmail) {\r\n                setUserRequest({\r\n                    setFieldErr: '',\r\n                    setUsernamedErr: 'Email is required',\r\n                    setWentWrongErr: '',\r\n                    setPasswordErr: '',\r\n                });\r\n                //  $('#username').focus();\r\n            } else {\r\n                setUserRequest({\r\n                    setFieldErr: '',\r\n                    setUsernamedErr: '',\r\n                    setWentWrongErr: '',\r\n                    setPasswordErr: 'Password is required',\r\n                });\r\n\r\n                // $('#password').focus();\r\n            }\r\n        }\r\n        e.preventDefault();\r\n    }\r\n\r\n    const { setFieldErr, setUsernamedErr, setWentWrongErr, setPasswordErr } = userRequest;\r\n\r\n    var vlidationError = setFieldErr !== '' ? setFieldErr : setUsernamedErr !== \"\" ? setUsernamedErr : setPasswordErr !== '' ? setPasswordErr : setWentWrongErr != '' ? setWentWrongErr : \"\";\r\n    // console.log(\"vlidationError\", vlidationError)\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n    const handleUserLogin = () => {\r\n        dispatch(userLogin({ \"email\": userEmail, \"password\": password }))\r\n\r\n    }\r\n\r\n    if (status == STATUSES.error) {\r\n        console.log(error)\r\n    }\r\n    if (status == STATUSES.IDLE && is_success) {\r\n        var loginRes = data && data.content;\r\n        if (loginRes && loginRes.subscriptions !== undefined && loginRes.subscriptions.length > 0) {\r\n            var userSubscription = loginRes.subscriptions[0];\r\n            userSubscription && sessionStorage.setItem(\"AUTH_KEY\", userSubscription.subscription_detail.client_guid + \":\" + userSubscription.subscription_detail.server_token);\r\n            var lang = userSubscription && userSubscription.subscription_permission.language ? userSubscription.subscription_permission.language : 'en';\r\n            localStorage.setItem(\"LANG\", lang);\r\n            localStorage.setItem('sitelist', JSON.stringify(loginRes))\r\n            localStorage.setItem('userId', loginRes.UserId)\r\n            localStorage.setItem(\"clientDetail\", JSON.stringify(userSubscription));\r\n            localStorage.setItem(\"hasPin\", loginRes.HasPin && loginRes.HasPin);\r\n        }\r\n        navigate('/site')\r\n    }\r\n\r\n\r\n\r\n    const handleNameChange = (e) => {\r\n        // console.log(\"event\",e.target.value);\r\n        setName(e.target.value);\r\n    }\r\n\r\n    const handlePasswordChange = (e) => {\r\n        // console.log(\"event\",e.target.value);\r\n        setPassword(e.target.value);\r\n    }\r\n\r\n\r\n    const responseFacebook = (response) => {\r\n        localStorage.removeItem('FGLoginData');\r\n        console.log(\"responseFacebook\", response);\r\n        if (response && response.status !== \"unknown\") {\r\n            //  this.setState({ isLoginSuccess: \"true\" })\r\n            localStorage.setItem('FGLoginData', JSON.stringify(response))\r\n            var dob = response && response.birthday ? response.birthday.split('/') : ''\r\n            var formatedDob = dob && dob.length == 3 ? '' + dob[2] + '-' + dob[1] + '-' + dob[0] : ''\r\n            var sendRes = {\r\n                userLoginInfo: {\r\n                    LoginProvider: response && response.graphDomain ? response.graphDomain : \"\",\r\n                    ProviderKey: response && response.id ? response.id : \"\"\r\n                },\r\n                DefaultUserName: response && response.name ? response.name : \"\",\r\n                Email: response && response.email ? response.email : '',\r\n                ClientGuid: \"\",\r\n                SendAuthToken: response && response.accessToken ? response.accessToken : \"\",\r\n                ModelName: \"\",\r\n                DeviceId: \"\",\r\n                Version: \"\",\r\n                FirstName: response && response.first_name ? response.first_name : \"\",\r\n                LastName: response && response.last_name ? response.last_name : \"\",\r\n                AccessToken: response && response.accessToken ? response.accessToken : \"\",\r\n                Picture: response && response.picture ? response.picture.data && response.picture.data.url : \"\",\r\n                Gender: response && response.gender ? response.gender : \"\",\r\n                PhoneNumber: response && response.phoneNumber ? response.PhoneNumber : '',\r\n                Dob: formatedDob,\r\n                AgeRange: response && response.age_range && response.age_range.min ? response.age_range.min : \"\",\r\n                // Address: response && response.address ? response.address : \"\",\r\n                Address: response && response.location && response.location.name ? response.location.name : \"\",\r\n                CountryName: response && response.country ? response.country : \"\",\r\n                CityName: response && response.city ? response.city : \"\",\r\n\r\n            }\r\n\r\n            CallService(sendRes);\r\n        } else {\r\n            // this.setState({ isLoginSuccess: \"false\" })\r\n        }\r\n    }\r\n\r\n    // call server on the bassis of facbook and google response \r\n    const CallService = (FGdata) => {\r\n        console.log(\"FGdata\", FGdata)\r\n        dispatch(userExternalLogin(FGdata))\r\n    }\r\n\r\n    // get user profile ionformation\r\n    const getProfileDetails = (param) => {\r\n        var data = {\r\n            access_token: param && param.access_token,\r\n            userId: param && param.userLoginInfo.ProviderKey\r\n        }\r\n        dispatch(GetUserProfileLogin(data))\r\n\r\n\r\n    }\r\n\r\n\r\n\r\n    const componentClicked = () => {\r\n        // this.setState({ isLoginSuccess: \"\" })\r\n        console.log(\"componentClicked\");\r\n    }\r\n\r\n    const responseGoogle = (response) => {\r\n        console.log(response);\r\n    }\r\n\r\n    // Life Cycle Method-----------\r\n    useEffect(() => {\r\n        document.addEventListener('AppleIDSignInOnSuccess', (event) => {\r\n            // Handle successful response.\r\n            singInApple();\r\n            console.log(\"---AppleIDSignInOnSuccess----\" + JSON.stringify(event));\r\n        });\r\n        // Listen for authorization failures.\r\n        document.addEventListener('AppleIDSignInOnFailure', (event) => {\r\n            // Handle error.\r\n            console.log(\"---AppleIDSignInOnFailure---\" + event.detail.error);\r\n        });\r\n        //Apple login Listner END\r\n\r\n        googleSDK();\r\n        appleLogin();\r\n    })\r\n\r\n    //Apple login methods Start\r\n    const appleLogin = () => {\r\n        let appleConnectLoaded = (AppleID) => {\r\n            // AppleID.auth.init({\r\n            //     clientId: \"sell.oliverpos.com\",\r\n            //     scope: 'name email',\r\n            //     state: 'origin:web',\r\n            //     redirectURI: Config.key.APPLE_LOGIN_RETURN_URL,\r\n            //     usePopup: true\r\n            // });\r\n            // setTimeout(() => {//To Remove the default apple logo\r\n            //     // $(\"svg text\").text('Sign in with Apple')\r\n            //     // $(\"svg text\").text($(\"svg text\").text().substring(1));\r\n            //     //  $(\"svg text\").removeAttr(\"textLength\");\r\n            //     // $(\"svg text\").css(\"fontFamily\", \"Poppins, Helvetica, sans-serif\");\r\n            //     //   $(\"svg text\").css(\"font-size\", \"0.8rem\");           \r\n            // }, 100);\r\n        };\r\n\r\n        // (function (d, s, cb) {\r\n        //     var js, fjs = d.getElementsByTagName(s)[0];\r\n        //     js = d.createElement(s);\r\n        //     js.src = \"//appleid.cdn-apple.com/appleauth/static/jsapi/appleid/1/en_US/appleid.auth.js\";\r\n        //     fjs.parentNode.insertBefore(js, fjs);\r\n        //     js.addEventListener(\"load\", () => cb(AppleID));\r\n        // }(document, 'script', appleConnectLoaded));\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n    const googleSDK = () => {\r\n        // this.setState({ isLoginSuccess: \"\" })\r\n        window['googleSDKLoaded'] = () => {\r\n            window['gapi'].load('auth2', () => {\r\n                auth2 = window['gapi'].auth2.init({\r\n                    client_id: Config.key.GOOGLE_CLIENT_ID,\r\n                    cookiepolicy: 'single_host_origin',\r\n                    scope: 'openid profile email https://www.googleapis.com/auth/user.addresses.read https://www.googleapis.com/auth/user.phonenumbers.read https://www.googleapis.com/auth/profile.agerange.read https://www.googleapis.com/auth/user.birthday.read https://www.googleapis.com/auth/user.gender.read',\r\n                    include_granted_scopes: true\r\n                    // access_type:\"offline\",\r\n                    // response_type:\"code\"\r\n                });\r\n                prepareGoogleLoginButton();\r\n            });\r\n        }\r\n\r\n        (function (d, s, id) {\r\n            var js, fjs = d.getElementsByTagName(s)[0];\r\n            if (d.getElementById(id)) { return; }\r\n            js = d.createElement(s); js.id = id;\r\n            js.src = \"https://apis.google.com/js/platform.js?onload=googleSDKLoaded\";\r\n            fjs.parentNode.insertBefore(js, fjs);\r\n        }(document, 'script', 'google-jssdk'));\r\n\r\n    }\r\n\r\n    const prepareGoogleLoginButton = () => {\r\n        localStorage.removeItem('FGLoginData');\r\n        // console.log('------ref-----------', googleLoginBtn.current);\r\n        auth2.attachClickHandler(googleLoginBtn.current, {},\r\n            (googleUser) => {\r\n                localStorage.setItem('FGLoginData', JSON.stringify(googleUser));\r\n                var profile = googleUser.getBasicProfile();\r\n                console.log(\"profile\", profile);\r\n                console.log('Token || ' + googleUser.getAuthResponse().id_token);\r\n                console.log('ID: ' + profile.getId());\r\n                console.log('Name: ' + profile.getName());\r\n                console.log('Image URL: ' + profile.getImageUrl());\r\n                console.log('Email: ' + profile.getEmail());\r\n                // console.log(\"Birthday: \" + profile.getBirthday());\r\n                //YOUR CODE HERE           \r\n                if (googleUser) {\r\n                    var sendRes = {\r\n                        userLoginInfo: {\r\n                            LoginProvider: \"google\",\r\n                            ProviderKey: profile && profile.getId() ? profile.getId() : \"\"\r\n                        },\r\n                        DefaultUserName: profile && profile.getName() ? profile.getName() : \"\",\r\n                        Email: profile && profile.getEmail() ? profile.getEmail() : '',\r\n                        ClientGuid: \"\",\r\n                        SendAuthToken: googleUser && googleUser.getAuthResponse() && googleUser.getAuthResponse().id_token ? googleUser.getAuthResponse().id_token : \"\",\r\n                        access_token: googleUser && googleUser.getAuthResponse() && googleUser.getAuthResponse().access_token ? googleUser.getAuthResponse().access_token : \"\",\r\n                        ModelName: \"\",\r\n                        DeviceId: \"\",\r\n                        Version: \"\",\r\n                        // FirstName: profile.getGivenName(),\r\n                        // LastName: profile.getFamilyName(),\r\n                        FirstName: '',\r\n                        LastName: \"\",\r\n                        Id: \"\",\r\n                        picture: '',\r\n                        Gender: '',\r\n                        PhoneNumber: '',\r\n                        Dob: '',\r\n                        AgeRange: ''\r\n                    }\r\n                    //  this.setState({ userRes: sendRes })\r\n                    getProfileDetails(sendRes)\r\n\r\n                }\r\n\r\n            }, (error) => {\r\n                // this.setState({ isLoginSuccess: \"false\" })\r\n                // alert(JSON.stringify(error, undefined, 2));\r\n            });\r\n\r\n    }\r\n\r\n    const singInApple = async () => {\r\n        try {\r\n            const response = await window.AppleID.auth.signIn();\r\n            if (response != null && typeof response != \"undefined\") {\r\n                localStorage.removeItem('FGLoginData');\r\n                localStorage.setItem('FGLoginData', JSON.stringify(response));\r\n                console.log(\"successful login with apple--\" + JSON.stringify(response))\r\n                var code = '';\r\n                var id_token = '';\r\n                var state = '';\r\n                var fname = '';\r\n                var lname = '';\r\n                var email = '';\r\n                if (response.authorization && typeof response.authorization != \"undefined\") {\r\n                    code = response.authorization.code;\r\n                    id_token = response.authorization.id_token;\r\n                    state = response.authorization.state;\r\n                }\r\n                if (response.user && typeof response.user != \"undefined\" && response.user.name && response.user.email) {\r\n                    fname = response.user.name.firstName;\r\n                    lname = response.user.name.lastName;\r\n                    email = response.user.email;\r\n                }\r\n                if (id_token != \"\") {\r\n                    var _data = parseJwt(id_token);\r\n                    if (_data != null && _data.email) {\r\n                        email = _data.email;\r\n                    }\r\n                }\r\n                var data = {\r\n                    FirstName: fname,\r\n                    LastName: lname,\r\n                    Email: email,\r\n                    Id: '',\r\n                    picture: '',\r\n                    Gender: '',\r\n                    Dob: '',\r\n                    AgeRange: '',\r\n                    Address: '',\r\n                    AccessToken: id_token,\r\n                    userLoginInfo: {\r\n                        LoginProvider: \"apple\",\r\n                        ProviderKey: \"\"\r\n                    },\r\n                    DefaultUserName: '',\r\n                    PhoneNumber: '',\r\n                    ClientGuid: '',\r\n                    SendAuthToken: id_token != '' ? true : false,\r\n                    ModelName: '',\r\n                    DeviceId: '',\r\n                    Version: '',\r\n                    CountryName: '',\r\n                    CityName: ''\r\n                }\r\n                CallService(data);\r\n\r\n            }\r\n        }\r\n        catch (error) {\r\n            console.log(\"---singInApple---catch--\");\r\n            // Handle error.\r\n        }\r\n    };\r\n\r\n    const parseJwt = (token) => {\r\n        var base64Url = token.split('.')[1];\r\n        var base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');\r\n        var jsonPayload = decodeURIComponent(atob(base64).split('').map(function (c) {\r\n            return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);\r\n        }).join(''));\r\n        return JSON.parse(jsonPayload);\r\n    };\r\n\r\n\r\n    const handleSignInClick = () => {\r\n        window.location = bridgDomain + '/Account/Register';\r\n    }\r\n\r\n    if (status == STATUSES.LOADING) {\r\n        return <div> Loading... </div>\r\n    }\r\n\r\n    return (<div className=\"login-wrapper\">\r\n        <div className=\"auto-margin-top\"></div>\r\n        {/* counter: {counter} */}\r\n        <img src={imglogo} />\r\n        <p >Sign in to your Oliver POS Account</p>\r\n        {/* {error !== \"\" && <div className=\"danger\">{error} </div>} */}\r\n        {vlidationError != \"\" &&\r\n            <div className=\"danger\">\r\n\r\n                {setWentWrongErr !== '' ? setWentWrongErr : setFieldErr !== '' ? setFieldErr : setUsernamedErr !== \"\" ? setUsernamedErr : setPasswordErr !== '' ? setPasswordErr : \"\"}\r\n            </div>}\r\n        <form className=\"login-form\">\r\n            <label htmlFor=\"email\">Email</label>\r\n            <input type=\"text\" id=\"email\" placeholder=\"Enter Email\" onKeyDown={handleKey} onChange={(e) => handleNameChange(e)} />\r\n            <label htmlFor=\"password\">Password</label>\r\n            <input type=\"password\" id=\"password\" placeholder=\"Enter Password\" onKeyDown={handleKey} onChange={(e) => handlePasswordChange(e)} />\r\n            <div className=\"row\">\r\n                <a href={bridgDomain + \"/Account/ForgotPassword?_refrence=sell\"} >Forgot your Password?</a>\r\n                <label className=\"custom-checkbox-wrapper\">\r\n                    <input type=\"checkbox\" />\r\n                    <div className=\"custom-checkbox\">\r\n                        <img src={Checkmark} alt=\"\" />\r\n                    </div>\r\n                    Remember Me?\r\n                </label>\r\n            </div>\r\n            <button type=\"button\" onClick={handleSubmit} onKeyDown={handleKey}>Sign In</button>\r\n        </form>\r\n        <div className=\"or-row\">\r\n            <div className=\"divider\"></div>\r\n            <p>OR</p>\r\n            <div className=\"divider\"></div>\r\n        </div>\r\n        {/* <button id=\"googleButton\" ref={googleLoginBtn} type=\"submit\"   >\r\n            <div className=\"img-container\">\r\n                <img src={imgGoogle} alt=\"\" />\r\n\r\n            </div>\r\n            Sign in with Google\r\n\r\n        </button> */}\r\n\r\n\r\n        {/* <GoogleLogin\r\n                clientId={Config.key.FACEBOOK_CLIENT_ID}\r\n                buttonText=\" Sign in with Google\"\r\n                onSuccess={responseGoogle}\r\n                onFailure={responseGoogle}\r\n                cookiePolicy={'single_host_origin'}\r\n            /> */}\r\n\r\n\r\n        {/* <button id=\"facebookButton\">\r\n            <div className=\"img-container\">\r\n                <img src={imgFaceBook} alt=\"\" />\r\n            </div>\r\n            <FacebookLogin cssClass=\"btn user_login_fb_on\"\r\n                appId={Config.key.FACEBOOK_CLIENT_ID}\r\n                autoLoad={false}\r\n                fields=\"first_name, last_name,name,email\"\r\n                scope=\"public_profile, email\"\r\n                onClick={componentClicked}\r\n                callback={responseFacebook}\r\n                textButton=\"Sign in with Facebook\"\r\n\r\n            />\r\n\r\n\r\n                />\r\n            \r\n        </button> */}\r\n\r\n\r\n        {/* <button type=\"submit\" id=\"appleid-signin\" title=\"Log in using your Apple account\"\r\n            data-color=\"black\" data-mode=\"center-align\" data-height=\"40\" data-border=\"true\" data-type=\"sign-in\" data-border-radius=\"4\"\r\n            className=\"apple_login_btn\">\r\n            <div className=\"img-container\" >\r\n                <img src={imgApple} alt=\"\" />\r\n            </div>\r\n            Sign in with Apple\r\n        </button> */}\r\n        <div className=\"row\">\r\n            <p>Don't have an account?</p>\r\n            <a href=\"#\" onClick={() => handleSignInClick()} >Sign up Now!</a>\r\n        </div>\r\n        <div className=\"auto-margin-bottom\"></div>\r\n\r\n    </div>\r\n    )\r\n};\r\n\r\nexport default Login;"],"mappings":"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"},"metadata":{},"sourceType":"module"}