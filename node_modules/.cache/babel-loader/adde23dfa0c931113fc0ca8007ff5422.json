{"ast":null,"code":"import _regeneratorRuntime from\"D:/OliverPOS/OliverPOS3.0/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"D:/OliverPOS/OliverPOS3.0/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"D:/OliverPOS/OliverPOS3.0/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import{useDispatch,useSelector}from'react-redux';import{deleteDB,openDB}from'idb';import{get_UDid}from'../common/localSettings';import Config from'../../Config';import{receiptSetting}from'../serverSetting/receiptSettingSlice';import ActiveUser from'../../settings/ActiveUser';import{taxSetting}from'../serverSetting/taxSettingSlice';import STATUSES from'../../constants/apiStatus';import{productCount}from'./productCountSlice';import{productLoader}from'./loadProductSlice';import{useNavigate}from'react-router-dom';import{useIndexedDB}from'react-indexed-db';//import LoaderOnboarding from '../onboarding/components/LoaderOnboarding'\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ProductLoader=function ProductLoader(){var _useIndexedDB=useIndexedDB(\"products\"),add=_useIndexedDB.add,update=_useIndexedDB.update,getByID=_useIndexedDB.getByID,getAll=_useIndexedDB.getAll,deleteRecord=_useIndexedDB.deleteRecord;var navigate=useNavigate();var dispatch=useDispatch();var _useState=useState(0),_useState2=_slicedToArray(_useState,2),loadingProducts=_useState2[0],setLoadingProducts=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),loadPerc=_useState4[0],setLoadPerc=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),productLoading=_useState6[0],setProductLoading=_useState6[1];//........Test--------------------------\nvar saveDataIntoIndexDB=function saveDataIntoIndexDB(ProductArray){ProductArray&&ProductArray.length>0&&ProductArray.map(function(item){add(item).then(function(key){// console.log(\"ID Generated: \", key);\n//   let newState = Object.assign({}, state);\n//   newState.id = key;\n//   setState(newState);\n//   history.goBack();\n},function(error){console.log(error);});});// var _state = { \"WPID\": 101, \"name\": \"nagendra\", \"age\": 32 }\n};//........................\nvar displayProductLoadStatus=function displayProductLoadStatus(total,Synched){if(total!=0){var _perc=(Synched*100/total).toFixed(0);setLoadingProducts(\"Synched \"+Synched+\" Products, Out of \"+total+\"\");setLoadPerc(_perc);}};var getProductList=function getProductList(pn,pz,totalSync){var totalRecord=localStorage.getItem(\"productcount\")?localStorage.getItem(\"productcount\"):0;displayProductLoadStatus(totalRecord,totalSync);//if (!localStorage.getItem('user') || !sessionStorage.getItem(\"issuccess\")) {\n//redirectToURL()\n// navigate('/loginpin');\n//}\nvar RedirectUrl=ActiveUser.key.isSelfcheckout&&ActiveUser.key.isSelfcheckout==true?'/selfcheckout':'/checkout';var udid=get_UDid(localStorage.getItem(\"UDID\"));var WarehouseId=localStorage.getItem(\"WarehouseId\")?parseInt(localStorage.getItem(\"WarehouseId\")):0;var pageNumber=pn;var pageSize=Config.key.FETCH_PRODUCTS_PAGESIZE;var PageSize=Config.key.FETCH_PRODUCTS_PAGESIZE;//var ProductArray = pl;       \nvar totalProductSync=parseInt(totalSync);var requestOptions={method:'GET',headers:{\"access-control-allow-origin\":\"*\",\"access-control-allow-credentials\":\"true\",'Accept':'application/json','Content-Type':'application/json','Authorization':'Basic '+btoa(sessionStorage.getItem(\"AUTH_KEY\"))},mode:'cors'};var isDemoUser=localStorage.getItem('demoUser')=='true'&&localStorage.getItem('DemoGuid');if(isDemoUser==true){requestOptions.headers['demoauth']=localStorage.getItem('DemoGuid')&&localStorage.getItem('DemoGuid');}if(totalRecord==0&&isDemoUser==false){// navigate( RedirectUrl) ;  \nconsole.log(\"test4\");// UpdateIndexDB(udid, ProductArray, RedirectUrl);\n}fetch(\"\".concat(Config.key.OP_API_URL,\"/v1/Product/Records?pageNumber=\").concat(pageNumber,\"&pageSize=\").concat(PageSize,\"&WarehouseId=\").concat(WarehouseId),requestOptions).then(function(response){if(response.ok){return response.json();}throw new Error(response.statusText);// throw an error if there's something wrong with the response\n}).then(function handleData(data){var reloadCount=localStorage.getItem(\"ReloadCount\");//ProductArray = [...new Set([...ProductArray, ...data.content.Records])];\nsaveDataIntoIndexDB(data.content.Records);//check dataExist into indexdb-------------------------\nvar isExist=false;console.log(\"--------------Total Products count--------\"+totalRecord);totalProductSync+=parseInt(data.content.Records.length);displayProductLoadStatus(totalRecord,totalProductSync);if(isDemoUser==false&&totalRecord>totalProductSync&&(totalRecord!=totalProductSync||pageNumber<=totalRecord/PageSize*1.0)){console.log(\"--------------Product list request time--------\"+new Date());// self.UpdateIndexDB(udid,ProductArray);\npageNumber++;//console.log(\"ProductArray1\",ProductArray.length)     \n// console.log(\"test5\")\ngetProductList(pageNumber,PageSize,parseInt(totalProductSync));//console.log(\"test6\")\n}else{console.log(\"--------------all records are done-----------\");//console.log(\"ProductArray2\",ProductArray.length)                        \n// UpdateIndexDB(udid, ProductArray, RedirectUrl);\nsetTimeout(function(){navigate('/dashboard');},100);}}).catch(function handleError(error){console.error('Console.save: No data '+error+\" \"+JSON.stringify(error));var reloadCount=localStorage.getItem(\"ReloadCount\");// handle errors here\nif(reloadCount<3){localStorage.setItem(\"ReloadCount\",parseInt(reloadCount)+1);setTimeout(function(){navigate('/');//Reload to get product\n// navigate( '/home')\n},1000);// navigate('/home')\n}});};//Getting the receipt and tax setting--------------------        \nvar _useSelector=useSelector(function(state){return[state.receiptsetting,state.taxsetting,state.productcount];}),_useSelector2=_slicedToArray(_useSelector,3),respReceiptSetting=_useSelector2[0],respTaxSetting=_useSelector2[1],resProlductCount=_useSelector2[2];if(respReceiptSetting&&respReceiptSetting.status==STATUSES.IDLE&&respReceiptSetting.is_success){localStorage.setItem('orderreciept',JSON.stringify(respReceiptSetting.data.content));}if(respTaxSetting&&respTaxSetting.status==STATUSES.IDLE&&respTaxSetting.is_success){localStorage.setItem('TAX_SETTING',JSON.stringify(respTaxSetting.data.content));}if(resProlductCount&&resProlductCount.status==STATUSES.IDLE&&resProlductCount.is_success){localStorage.setItem('productcount',JSON.stringify(resProlductCount.data.content.count));}var useCancelled=false;useEffect(function(){if(useCancelled==false){fetchData();}return function(){useCancelled=true;};},[]);var useApiCancelled=false;useEffect(function(){if(useApiCancelled==false){getProductList(1,Config.key.FETCH_PRODUCTS_PAGESIZE,0);}return function(){useApiCancelled=true;};},[]);var fetchData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var udid;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0://calling multiple api\nudid=get_UDid(localStorage.getItem(\"UDID\"));dispatch(productCount(udid));dispatch(receiptSetting());dispatch(taxSetting());case 4:case\"end\":return _context.stop();}}},_callee);}));return function fetchData(){return _ref.apply(this,arguments);};}();//  this.getProductList(1, Config.key.FETCH_PRODUCTS_PAGESIZE, [], pcount);\nreturn/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Product Loading...\"}),/*#__PURE__*/_jsxs(\"h2\",{children:[\" \",loadingProducts,\" ( \",loadPerc,\")% \"]}),\"; ;\"]});};export default ProductLoader;","map":{"version":3,"names":["React","useEffect","useState","useDispatch","useSelector","deleteDB","openDB","get_UDid","Config","receiptSetting","ActiveUser","taxSetting","STATUSES","productCount","productLoader","useNavigate","useIndexedDB","ProductLoader","add","update","getByID","getAll","deleteRecord","navigate","dispatch","loadingProducts","setLoadingProducts","loadPerc","setLoadPerc","productLoading","setProductLoading","saveDataIntoIndexDB","ProductArray","length","map","item","then","key","error","console","log","displayProductLoadStatus","total","Synched","_perc","toFixed","getProductList","pn","pz","totalSync","totalRecord","localStorage","getItem","RedirectUrl","isSelfcheckout","udid","WarehouseId","parseInt","pageNumber","pageSize","FETCH_PRODUCTS_PAGESIZE","PageSize","totalProductSync","requestOptions","method","headers","btoa","sessionStorage","mode","isDemoUser","fetch","OP_API_URL","response","ok","json","Error","statusText","handleData","data","reloadCount","content","Records","isExist","Date","setTimeout","catch","handleError","JSON","stringify","setItem","state","receiptsetting","taxsetting","productcount","respReceiptSetting","respTaxSetting","resProlductCount","status","IDLE","is_success","count","useCancelled","fetchData","useApiCancelled"],"sources":["D:/OliverPOS/OliverPOS3.0/src/components/loadProduct/ProductLoader.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { deleteDB, openDB } from 'idb';\r\n\r\nimport { get_UDid } from '../common/localSettings'\r\nimport Config from '../../Config';\r\nimport { receiptSetting } from '../serverSetting/receiptSettingSlice';\r\nimport ActiveUser from '../../settings/ActiveUser';\r\nimport { taxSetting } from '../serverSetting/taxSettingSlice';\r\nimport STATUSES from '../../constants/apiStatus';\r\nimport { productCount } from './productCountSlice';\r\nimport { productLoader } from './loadProductSlice';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { useIndexedDB } from 'react-indexed-db';\r\n\r\n//import LoaderOnboarding from '../onboarding/components/LoaderOnboarding'\r\nconst ProductLoader = () => {\r\n    const { add, update, getByID, getAll, deleteRecord } = useIndexedDB(\"products\");\r\n\r\n    const navigate = useNavigate();\r\n    const dispatch = useDispatch()\r\n    const [loadingProducts, setLoadingProducts] = useState(0)\r\n    const [loadPerc, setLoadPerc] = useState(0)\r\n    const [productLoading, setProductLoading] = useState(false)\r\n\r\n    //........Test--------------------------\r\n    const saveDataIntoIndexDB = (ProductArray) => {\r\n        ProductArray && ProductArray.length > 0 && ProductArray.map((item) => {\r\n            add(item).then(\r\n                (key) => {\r\n                    // console.log(\"ID Generated: \", key);\r\n                    //   let newState = Object.assign({}, state);\r\n                    //   newState.id = key;\r\n                    //   setState(newState);\r\n                    //   history.goBack();\r\n                },\r\n                (error) => {\r\n                    console.log(error);\r\n                }\r\n            )\r\n        })\r\n\r\n        // var _state = { \"WPID\": 101, \"name\": \"nagendra\", \"age\": 32 }\r\n\r\n    }\r\n    //........................\r\n    const displayProductLoadStatus = (total, Synched) => {\r\n        if (total != 0) {\r\n            var _perc = ((Synched * 100) / total).toFixed(0);\r\n            setLoadingProducts(\"Synched \" + Synched + \" Products, Out of \" + total + \"\");\r\n            setLoadPerc(_perc);\r\n        }\r\n    }\r\n    const getProductList = (pn, pz, totalSync) => {\r\n        var totalRecord = localStorage.getItem(\"productcount\") ? localStorage.getItem(\"productcount\") : 0;\r\n        displayProductLoadStatus(totalRecord, totalSync)\r\n\r\n\r\n        //if (!localStorage.getItem('user') || !sessionStorage.getItem(\"issuccess\")) {\r\n        //redirectToURL()\r\n        // navigate('/loginpin');\r\n        //}\r\n        var RedirectUrl = ActiveUser.key.isSelfcheckout && ActiveUser.key.isSelfcheckout == true ? '/selfcheckout' : '/checkout';\r\n\r\n        var udid = get_UDid(localStorage.getItem(\"UDID\"));\r\n\r\n        var WarehouseId = localStorage.getItem(\"WarehouseId\") ? parseInt(localStorage.getItem(\"WarehouseId\")) : 0;\r\n\r\n        var pageNumber = pn;\r\n        var pageSize = Config.key.FETCH_PRODUCTS_PAGESIZE;\r\n        var PageSize = Config.key.FETCH_PRODUCTS_PAGESIZE;\r\n\r\n        //var ProductArray = pl;       \r\n        var totalProductSync = parseInt(totalSync);\r\n        const requestOptions = {\r\n            method: 'GET',\r\n            headers: {\r\n                \"access-control-allow-origin\": \"*\",\r\n                \"access-control-allow-credentials\": \"true\",\r\n                'Accept': 'application/json',\r\n                'Content-Type': 'application/json',\r\n                'Authorization': 'Basic ' + btoa(sessionStorage.getItem(\"AUTH_KEY\")),\r\n            }\r\n            , mode: 'cors'\r\n        };\r\n        var isDemoUser = localStorage.getItem('demoUser') == 'true' && localStorage.getItem('DemoGuid');\r\n        if (isDemoUser == true) {\r\n            requestOptions.headers['demoauth'] = localStorage.getItem('DemoGuid') && localStorage.getItem('DemoGuid')\r\n        }\r\n        if (totalRecord == 0 && isDemoUser == false) {\r\n            // navigate( RedirectUrl) ;  \r\n            console.log(\"test4\")\r\n            // UpdateIndexDB(udid, ProductArray, RedirectUrl);\r\n        }\r\n\r\n        fetch(`${Config.key.OP_API_URL}/v1/Product/Records?pageNumber=${pageNumber}&pageSize=${PageSize}&WarehouseId=${WarehouseId}`, requestOptions)\r\n            .then(response => {\r\n                if (response.ok) { return response.json(); }\r\n                throw new Error(response.statusText)  // throw an error if there's something wrong with the response\r\n            })\r\n            .then(function handleData(data) {\r\n                var reloadCount = localStorage.getItem(\"ReloadCount\");\r\n                //ProductArray = [...new Set([...ProductArray, ...data.content.Records])];\r\n                saveDataIntoIndexDB(data.content.Records)\r\n                //check dataExist into indexdb-------------------------\r\n                var isExist = false;\r\n\r\n                console.log(\"--------------Total Products count--------\" + totalRecord);\r\n\r\n                totalProductSync += parseInt(data.content.Records.length);\r\n\r\n                displayProductLoadStatus(totalRecord, totalProductSync)\r\n\r\n                if (isDemoUser == false && (totalRecord > totalProductSync) && ((totalRecord != totalProductSync) || pageNumber <= (totalRecord / PageSize * 1.0))) {\r\n                    console.log(\"--------------Product list request time--------\" + new Date());\r\n                    // self.UpdateIndexDB(udid,ProductArray);\r\n                    pageNumber++;\r\n                    //console.log(\"ProductArray1\",ProductArray.length)     \r\n                    // console.log(\"test5\")\r\n                    getProductList(pageNumber, PageSize, parseInt(totalProductSync));\r\n                    //console.log(\"test6\")\r\n                }\r\n                else {\r\n                    console.log(\"--------------all records are done-----------\");\r\n                    //console.log(\"ProductArray2\",ProductArray.length)                        \r\n\r\n                    // UpdateIndexDB(udid, ProductArray, RedirectUrl);\r\n                    setTimeout(() => {\r\n                        navigate('/dashboard');\r\n                    }, 100);\r\n\r\n                }\r\n            })\r\n            .catch(function handleError(error) {\r\n                console.error('Console.save: No data ' + error + \" \" + JSON.stringify(error));\r\n                var reloadCount = localStorage.getItem(\"ReloadCount\");\r\n                // handle errors here\r\n                if (reloadCount < 3) {\r\n                    localStorage.setItem(\"ReloadCount\", (parseInt(reloadCount) + 1));\r\n                    setTimeout(function () {\r\n                        navigate('/'); //Reload to get product\r\n                        // navigate( '/home')\r\n                    }, 1000)\r\n                    // navigate('/home')\r\n                }\r\n            })\r\n    }\r\n\r\n\r\n    //Getting the receipt and tax setting--------------------        \r\n\r\n    const [respReceiptSetting, respTaxSetting, resProlductCount] = useSelector((state) => [state.receiptsetting, state.taxsetting, state.productcount])\r\n\r\n    if (respReceiptSetting && respReceiptSetting.status == STATUSES.IDLE && respReceiptSetting.is_success) {\r\n        localStorage.setItem('orderreciept', JSON.stringify(respReceiptSetting.data.content))\r\n    }\r\n    if (respTaxSetting && respTaxSetting.status == STATUSES.IDLE && respTaxSetting.is_success) {\r\n        localStorage.setItem('TAX_SETTING', JSON.stringify(respTaxSetting.data.content))\r\n    }\r\n    if (resProlductCount && resProlductCount.status == STATUSES.IDLE && resProlductCount.is_success) {\r\n        localStorage.setItem('productcount', JSON.stringify(resProlductCount.data.content.count))\r\n\r\n    }\r\n\r\n    let useCancelled = false;\r\n    useEffect(() => {\r\n        if (useCancelled == false) {\r\n            fetchData()\r\n        }\r\n        return () => {\r\n            useCancelled = true;\r\n        }\r\n    }, []);\r\n\r\n    let useApiCancelled = false;\r\n    useEffect(() => {\r\n        if (useApiCancelled == false) {\r\n            getProductList(1, Config.key.FETCH_PRODUCTS_PAGESIZE, 0);\r\n        }\r\n        return () => {\r\n            useApiCancelled = true;\r\n        }\r\n    }, [])\r\n\r\n    const fetchData = async () => { //calling multiple api\r\n\r\n        var udid = get_UDid(localStorage.getItem(\"UDID\"));\r\n        dispatch(productCount(udid));\r\n        dispatch(receiptSetting());\r\n        dispatch(taxSetting());\r\n\r\n    }\r\n\r\n\r\n\r\n    //  this.getProductList(1, Config.key.FETCH_PRODUCTS_PAGESIZE, [], pcount);\r\n    return <div>\r\n        <h1>Product Loading...</h1>\r\n        <h2> {loadingProducts} ( {loadPerc})% </h2>;\r\n        ;\r\n    </div>\r\n}\r\n\r\nexport default ProductLoader"],"mappings":"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"},"metadata":{},"sourceType":"module"}